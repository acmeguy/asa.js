{"version":3,"sources":["webpack:///asa.js","webpack:///webpack/bootstrap 5f045019ab4deb14feae","webpack:///./src/index.js","webpack:///./src/partner.js","webpack:///./src/parseuri.js","webpack:///./src/auto_track.js","webpack:///./src/session.js","webpack:///./src/debug.js","webpack:///./src/user.js","webpack:///./src/cookies.js","webpack:///./src/domain_hash.js","webpack:///./src/randomness.js","webpack:///./src/inbox.js","webpack:///./src/microdata.js","webpack:///./src/DOM.js","webpack:///./src/event.js","webpack:///./src/version.js","webpack:///./src/features.js","webpack:///./src/utils.js","webpack:///./src/server.js","webpack:///./~/superagent/lib/client.js","webpack:///./~/superagent/~/component-emitter/index.js","webpack:///./~/superagent/~/reduce-component/index.js","webpack:///./src/ajax.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","partner","autoTrack","debug","inbox","core","pendingEvents","window","asa","q","submitEvent","i","length","apply","setPartnerInfo","sections","e","forceLog","parseUri","updatePartnerInfo","partnerIdKey","partnerSIdKey","uri","location","href","partnerId","queryKey","__asa_partner_id","partnerSId","__asa_partner_sid","sessionStorage","setItem","removeItem","referrer","document","authority","currentHost","origin","str","o","options","parser","strictMode","exec","key","name","replace","$0","$1","$2","strict","loose","session","locationHashChanged","oldHash","newHash","substr","storedHash","setInterval","hash","links","domains","domainsTracked","tracker","ev","target","destination","indexOf","alreadyHasParams","encodeURIComponent","asaId","getSessionId","addEventListener","user","randomness","SESSION_EXPIRE_TIMEOUT","SESSION_COOKIE_NAME","store","hasItem","item","getItem","JSON","parse","t","Date","v","value","timeout","stringify","updateTimeout","sessionStore","ourSessionManager","extendSession","log","getDomainId","getUserId","getNumber","providedSessionManager","sessionManager","customSession","getSession","console","noLog","doLog","unshift","arguments","me","setDebugMode","on","cookies","USER_ID_COOKIE","generateUserId","host","Infinity","getUserHash","parseInt","split","docCookies","sKey","decodeURIComponent","cookie","RegExp","sValue","vEnd","sPath","sDomain","bSecure","test","sExpires","constructor","Number","String","toUTCString","this","keys","aKeys","nLen","nIdx","d","h","a","charCodeAt","Math","round","random","microdata","event","transport","setMapper","jq","collectReferencedProperties","element","refString","attr","refs","ref","refItem","collectProperties","get","collectComplexProperty","type","properties","collectSimpleProperty","el","tag","prop","text","children","each","_","child","findTopLevelItems","undefined","items","tagName","processElement","itemScope","itemProp","push","theOneMapper","__items","extractFromHead","meta","noMapper","callbackWrapper","cb","extract","mapper","DOMElement","DOMElements","els","_els","prototype","_element","textContent","attrValue","getAttribute","$doms","n","$DOM","callback","index","query","Element","Error","wrapper","trim","elem","elems","getElementById","querySelectorAll","exception","info","DOMMeta","pageview","title","protocol","pathname","search","page","sectionentered","section","custom","gatherMetaInfo","eventBody","slice","gatherSystemInfo","uid","partner_id","partner_sid","tenant_id","version","package","eventname","domElement","extra","override","features","major","minor","build","experiments","experimentsLive","join","defineExperiment","percentage","isExperiment","exp","clearExperiments","result","hasOwnProperty","MINI_AJAX","copyProps","o1","o2","batchIntervalHandler","r","ajax","pendingSubmission","done","postalAddress","post","packet","request","setRequestHeader","send","submitNow","Array","err","set","end","res","submitNow2","splice","batchEvent","batchOn","batchSize","min","batchOff","clearInterval","noop","isHost","obj","toString","isObject","Object","serialize","pairs","parseString","parts","pair","len","parseHeader","line","field","val","lines","fields","pop","toLowerCase","shift","params","reduce","Response","req","xhr","method","responseType","responseText","statusText","setStatusProperties","status","header","headers","getAllResponseHeaders","getResponseHeader","setHeaderProperties","body","parseBody","response","Request","url","self","Emitter","_query","_header","original","emit","new_err","root","getXHR","XMLHttpRequest","ActiveXObject","s","serializeObject","types","html","json","xml","urlencoded","form","form-data","application/x-www-form-urlencoded","application/json","ct","fn","statusCode","statusType","ok","clientError","serverError","error","toError","accepted","noContent","badRequest","unauthorized","notAcceptable","notFound","forbidden","msg","use","ms","_timeout","clearTimeout","_timer","abort","aborted","unset","getHeader","accept","auth","pass","btoa","_formData","FormData","append","attach","file","filename","data","_data","_callback","crossDomainError","crossDomain","timeoutError","withCredentials","_withCredentials","onreadystatechange","readyState","timedout","handleProgress","total","percent","hasListeners","onprogress","upload","setTimeout","open","contentType","then","fulfill","reject","head","del","patch","put","mixin","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","callbacks","args","listeners","arr","initial","idx","curr","XDomainRequest","onerror","onload"],"mappings":"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","file":"asa.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t(function () {\n\t    // var DNT = navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;\n\t    // if (DNT && (DNT === 'yes' || DNT.charAt(0) === '1')) return;\n\t\tvar partner = __webpack_require__(1);\n\t\tvar autoTrack = __webpack_require__(3);\n\t\tvar debug = __webpack_require__(5);\n\t\tvar inbox = __webpack_require__(10);\t\n\t\tvar core = __webpack_require__(17);\n\t\tvar features = __webpack_require__(15);\n\t\n\t\ttry {\n\t\t\tvar pendingEvents = [];\n\t\t\tif ((typeof window.asa !== 'undefined') && (typeof window.asa.q !== 'undefined')) {\n\t\t\t\tpendingEvents = window.asa.q;\n\t\t\t}\n\t\n\t\t\twindow.asa = inbox(core.submitEvent);\n\t\n\t\t\t// features.defineExperiment(features.MINI_AJAX, 10);\n\t\n\t\t\tfor (var i = 0; i < pendingEvents.length; i++) {\n\t\t\t\twindow.asa.apply(null, pendingEvents[i]);\n\t\t\t}\n\t\n\t\t\tpartner.setPartnerInfo();\n\t\t\tautoTrack.sections();\n\t\t} catch (e) {\n\t\t\tdebug.forceLog('exception during init: ', e);\n\t\t}\n\t})();\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\tvar parseUri = __webpack_require__(2);\n\t\tvar updatePartnerInfo = function (){\n\t\t\tvar partnerIdKey = '__as.partner_id';\n\t\t\tvar partnerSIdKey = '__as.partner_sid';\n\t\t\tvar uri = parseUri(window.location.href);\n\t\t\tvar partnerId = uri.queryKey.__asa_partner_id;\n\t\t\tvar partnerSId = uri.queryKey.__asa_partner_sid;\n\t\t\tif (partnerId){\n\t\t\t\twindow.sessionStorage.setItem(partnerIdKey, uri.queryKey.__asa_partner_id);\t\t\t\t\n\t\t\t} else {\n\t\t\t\twindow.sessionStorage.removeItem(partnerIdKey);\n\t\t\t}\n\t\t\tif (partnerSId){\n\t\t\t\twindow.sessionStorage.setItem(partnerSIdKey, uri.queryKey.__asa_partner_sid);\t\t\t\t\n\t\t\t} else {\n\t\t\t\twindow.sessionStorage.removeItem(partnerSIdKey);\n\t\t\t}\n\t\t};\n\tmodule.exports = {\n\t\t\n\t\tsetPartnerInfo : function(){\n\t\t\tvar referrer = parseUri(document.referrer).authority;\n\t\t\tvar currentHost = parseUri(window.location.origin).authority;\n\t\t\tif (referrer != currentHost){\n\t\t\t\tupdatePartnerInfo();\n\t\t\t}\n\t\t}\n\t\t\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t// parseUri 1.2.2\n\t// (c) Steven Levithan <stevenlevithan.com>\n\t// MIT License\n\t\n\tfunction parseUri (str) {\n\t\tvar\to   = parseUri.options,\n\t\t\tm   = o.parser[o.strictMode ? \"strict\" : \"loose\"].exec(str),\n\t\t\turi = {},\n\t\t\ti   = 14;\n\t\n\t\twhile (i--) uri[o.key[i]] = m[i] || \"\";\n\t\n\t\turi[o.q.name] = {};\n\t\turi[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {\n\t\t\tif ($1) uri[o.q.name][$1] = $2;\n\t\t});\n\t\n\t\treturn uri;\n\t}\n\t\n\tparseUri.options = {\n\t\tstrictMode: false,\n\t\tkey: [\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"],\n\t\tq:   {\n\t\t\tname:   \"queryKey\",\n\t\t\tparser: /(?:^|&)([^&=]*)=?([^&]*)/g\n\t\t},\n\t\tparser: {\n\t\t\tstrict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n\t\t\tloose:  /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n\t\t}\n\t};\n\t\n\tmodule.exports = parseUri;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar session = __webpack_require__(4);\n\tvar parseUri = __webpack_require__(2);\n\tmodule.exports = {\n\t\tsections: function () {\n\t\t\tvar locationHashChanged = function (oldHash, newHash) {\n\t\t\t\tasa('sectionentered', newHash.substr(1));\n\t\t\t};\n\t\t\tvar storedHash = '';\n\t\t\twindow.setInterval(function () {\n\t\t\t\tif (window.location.hash != storedHash) {\n\t\t\t\t\tvar newHash = window.location.hash;\n\t\t\t\t\tlocationHashChanged(storedHash, newHash);\n\t\t\t\t\tstoredHash = newHash;\n\t\t\t\t}\n\t\t\t}, 100);\n\t\t},\n\t\n\t\tlinks: function (domains) {\n\t\t\tvar domainsTracked = domains;\n\t\t\tvar tracker = function (ev) {\n\t\t\t\tvar href = ev.target.href;\n\t\t\t\tif (href) {\n\t\t\t\t\tvar destination = parseUri(href);\n\t\t\t\t\tif (domainsTracked.indexOf(destination.authority) > -1) {\n\t\t\t\t\t\tvar alreadyHasParams = ev.target.href.indexOf('?') !== -1;\n\t\t\t\t\t\thref = href + (alreadyHasParams ? '&' : '?') + '__asa_partner_id=' + encodeURIComponent(window.asaId) + '&__asa_partner_sid=' + encodeURIComponent(session.getSessionId());\n\t\t\t\t\t\tev.target.href = href;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tdocument.addEventListener('mousedown', tracker);\n\t\t\tdocument.addEventListener('keyup', tracker);\n\t\t\tdocument.addEventListener('touchstart', tracker);\n\t\t}\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar debug = __webpack_require__(5);\n\tvar user = __webpack_require__(6);\n\tvar randomness = __webpack_require__(9);\n\tvar hash = __webpack_require__(8);\n\t\n\t\n\tvar SESSION_EXPIRE_TIMEOUT = 30 * 60;\n\t// SESSION_EXPIRE_TIMEOUT = 30 * 60;\n\tvar SESSION_COOKIE_NAME = '__asa_session';\n\t\n\tvar store = {\n\t\thasItem: function (name) {\n\t\t\tvar item = window.sessionStorage.getItem(name);\n\t\t\treturn item && JSON.parse(item).t > (1 * new Date());\n\t\t},\n\t\tgetItem: function (name) {\n\t\t\treturn JSON.parse(window.sessionStorage.getItem(name)).v;\n\t\t},\n\t\tsetItem: function (name, value, timeout) {\n\t\t\twindow.sessionStorage.setItem(name, JSON.stringify({\n\t\t\t\tv: value,\n\t\t\t\tt: (1 * new Date()) + (1000 * timeout)\n\t\t\t}));\n\t\t},\n\t\tupdateTimeout: function (name, timeout) {\n\t\t\tvar item = JSON.parse(window.sessionStorage.getItem(name));\n\t\t\tstore.setItem(name, item.v, timeout);\n\t\t}\n\t};\n\t\n\tvar sessionStore = store;\n\tvar ourSessionManager = {\n\t\textendSession: function () {\n\t\t\tif (!sessionStore.hasItem(SESSION_COOKIE_NAME)) {\n\t\t\t\tdebug.log('starting session');\n\t\t\t\tsessionStore.setItem(SESSION_COOKIE_NAME, user.getDomainId() + '.' + hash(user.getUserId() + '.' + randomness.getNumber()), SESSION_EXPIRE_TIMEOUT);\n\t\t\t} else {\n\t\t\t\tsessionStore.updateTimeout(SESSION_COOKIE_NAME, SESSION_EXPIRE_TIMEOUT);\n\t\t\t}\n\t\t},\n\t\n\t\tgetSessionId: function () {\n\t\t\treturn sessionStore.getItem(SESSION_COOKIE_NAME);\n\t\t}\n\t    \n\t};\n\tvar providedSessionManager = function(getSessionId, extendSession){\n\t    return {\n\t        extendSession: function () {\n\t            if (extendSession) extendSession();\n\t        },\n\t    \n\t        getSessionId: function () {\n\t            return getSessionId();\n\t        }    \n\t    };\n\t};\n\tvar sessionManager = ourSessionManager;\n\tmodule.exports = {\n\t\textendSession: function () {\n\t        sessionManager.extendSession();\n\t\t},\n\t\n\t\tgetSessionId: function () {\n\t\t\treturn sessionManager.getSessionId();\n\t\t},\n\t    customSession : function(getSession, extendSession){\n\t        sessionManager = providedSessionManager(getSession, extendSession);\n\t    }\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t// old ie\n\tif (typeof console === 'undefined') {\n\t\twindow.console = {};\n\t}\n\tif (typeof console.log === 'undefined'){\n\t\twindow.console.log = function(){};\n\t}\n\t\n\tvar noLog = function noLog() { };\n\tvar doLog = function doLog() {\n\t\t[].unshift.call(arguments, 'asa.js:');\n\t\tconsole.log.apply(console, arguments);\n\t};\n\tvar me = module.exports = {\n\t\tlog: noLog,\n\t\tsetDebugMode: function (on) {\n\t\t\tme.log = on ? doLog : noLog;\n\t\t},\n\t\tforceLog:doLog\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar cookies = __webpack_require__(7);\n\tvar hash = __webpack_require__(8);\n\tvar randomness = __webpack_require__(9);\n\tvar USER_ID_COOKIE = '__as_user';\n\tvar generateUserId = function () {\n\t\treturn hash(window.location.host) + '.' + hash('' + randomness.getNumber());\n\t};\n\tvar getUserId = function () {\n\t\tif (!cookies.hasItem(USER_ID_COOKIE)) {\n\t\t\tcookies.setItem(USER_ID_COOKIE, generateUserId(), Infinity, '/');\n\t\t}\n\t\n\t\treturn cookies.getItem(USER_ID_COOKIE);\n\t};\n\t\n\tmodule.exports = {\n\t\tgetUserId: getUserId,\n\t\tgetDomainId: function () {\n\t\t\treturn hash(window.location.host);\n\t\t},\n\t\tgetUserHash: function () {\n\t\t\treturn parseInt(getUserId().split('.')[1], 10);\n\t\t}\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t/*\\\n\t|*|\n\t|*|  :: cookies.js ::\n\t|*|\n\t|*|  A complete cookies reader/writer framework with full unicode support.\n\t|*|\n\t|*|  Revision #1 - September 4, 2014\n\t|*|\n\t|*|  https://developer.mozilla.org/en-US/docs/Web/API/document.cookie\n\t|*|  https://developer.mozilla.org/User:fusionchess\n\t|*|\n\t|*|  This framework is released under the GNU Public License, version 3 or later.\n\t|*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html\n\t|*|\n\t|*|  Syntaxes:\n\t|*|\n\t|*|  * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])\n\t|*|  * docCookies.getItem(name)\n\t|*|  * docCookies.removeItem(name[, path[, domain]])\n\t|*|  * docCookies.hasItem(name)\n\t|*|  * docCookies.keys()\n\t|*|\n\t\\*/\n\t\n\tvar docCookies = {\n\t  getItem: function (sKey) {\n\t    if (!sKey) { return null; }\n\t    return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\n\t  },\n\t  setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\n\t    if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return false; }\n\t    var sExpires = \"\";\n\t    if (vEnd) {\n\t      switch (vEnd.constructor) {\n\t        case Number:\n\t          sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\n\t          break;\n\t        case String:\n\t          sExpires = \"; expires=\" + vEnd;\n\t          break;\n\t        case Date:\n\t          sExpires = \"; expires=\" + vEnd.toUTCString();\n\t          break;\n\t      }\n\t    }\n\t    document.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\n\t    return true;\n\t  },\n\t  removeItem: function (sKey, sPath, sDomain) {\n\t    if (!this.hasItem(sKey)) { return false; }\n\t    document.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\");\n\t    return true;\n\t  },\n\t  hasItem: function (sKey) {\n\t    if (!sKey) { return false; }\n\t    return (new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\n\t  },\n\t  keys: function () {\n\t    var aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\n\t    for (var nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }\n\t    return aKeys;\n\t  }\n\t};\n\t\n\tmodule.exports = docCookies;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t// this hashing algorithm is as found in some version of Google Analytics\n\t/* jshint ignore:start */\n\tmodule.exports = function hash(d) {\n\t    var a = 1, c = 0, h, o;\n\t    if (d) {\n\t        a = 0;\n\t        for (h = d[\"length\"] - 1; h >= 0; h--) {\n\t            o = d.charCodeAt(h);\n\t            a = (a << 6 & 268435455) + o + (o << 14);\n\t            c = a & 266338304;\n\t            a = c != 0 ? a ^ c >> 21 : a\n\t        }\n\t    }\n\t    return a\n\t};\n\t/* jshint ignore:end */\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = {\n\t\tgetNumber : function(){\n\t\t\treturn Math.round(Math.random() * new Date());\n\t\t}\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar session = __webpack_require__(4);\n\tvar microdata = __webpack_require__(11);\n\tvar autoTrack = __webpack_require__(3);\n\tvar debug = __webpack_require__(5);\n\tvar event = __webpack_require__(13);\n\t\n\tmodule.exports = function inbox(transport) {\n\t\treturn function () {\n\t\t\ttry {\n\t\t\t\tif (arguments[0] == 'session') {\n\t\t\t\t\tsession.customSession(arguments[1], arguments[2])\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tif (arguments[0] == 'connectedPartners') {\n\t\t\t\t\tautoTrack.links(arguments[1]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (arguments[0] == 'tenantId') {\n\t\t\t\t\twindow.asaId = arguments[1];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (arguments[0] == 'debug') {\n\t\t\t\t\tdebug.setDebugMode(arguments[1]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tif (arguments[0] == 'transformer') {\n\t\t\t\t\tmicrodata.setMapper(arguments[1]);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tsession.extendSession();\n\t\t\t\t\n\t\t\t\ttransport(event.package.apply(event, arguments));\n\t\t\t} catch (e) {\n\t\t\t\tdebug.forceLog('inbox exception:', e);\n\t\t\t}\n\t\t};\n\t};\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// var jq = $;\n\tvar jq = __webpack_require__(12);\n\tvar debug = __webpack_require__(5);\n\t\n\tvar collectReferencedProperties = function (element, item) {\n\t\tvar refString = element.attr('itemref');\n\t\tif (typeof refString !== 'undefined') {\n\t\t\tvar refs = refString.split(' ');\n\t\t\tfor (var i = 0; i < refs.length; i++) {\n\t\t\t\tvar ref = refs[i];\n\t\t\t\tvar refItem = jq('#' + ref);\n\t\t\t\tif (refItem.length === 1){\n\t\t\t\t\tcollectProperties(refItem.get(0), item);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tdebug.log('missing metadata element', ref);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\t\n\tvar collectComplexProperty = function (element) {\n\t\tvar item = {\n\t\t\t\"type\": element.attr(\"itemtype\"),\n\t\t\t\"properties\": {}\n\t\t};\n\t\tcollectReferencedProperties(element, item);\n\t\tcollectProperties(element, item);\n\t\treturn item;\n\t};\n\t\n\tvar collectSimpleProperty = function (el) {\n\t\tvar tag = el.prop('tagName');\n\t\tswitch (tag) {\n\t\t\tcase 'TIME': return el.attr('datetime');\n\t\t\tcase 'A':\n\t\t\tcase 'LINK':\n\t\t\t\treturn el.attr('href');\n\t\t\tdefault:\n\t\t\t\treturn el.prop(\"content\") || el.text() || el.attr(\"src\");\n\t\t}\n\t\n\t};\n\t\n\tvar collectProperties = function (el, item) {\n\t\tel.children().each(function (_, c) {\n\t\t\tvar child = jq(c);\n\t\t\tvar prop = child.attr('itemprop');\n\t\t\tif (typeof prop === 'string') {\n\t\t\t\tif (typeof child.attr('itemscope') !== 'undefined') {\n\t\t\t\t\titem.properties[prop] = collectComplexProperty(child);\n\t\t\t\t} else {\n\t\t\t\t\titem.properties[prop] = collectSimpleProperty(child);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (typeof child.attr('itemscope') == 'undefined') {\n\t\t\t\tcollectProperties(child, item);\n\t\t\t}\n\t\t});\n\t};\n\t\n\tvar findTopLevelItems = function (el) {\n\t\tif (!el) return undefined; \n\t\tvar items = [];\n\t\tif (typeof el === 'string') { el = jq('#'+el).get(0); }\n\t\telse if (typeof el === 'object' && typeof el.tagName === 'string') { el = jq(el); }\n\t\telse return {};\n\t\n\t\tvar processElement = function (e) {\n\t\t\tvar el = jq(e);\n\t\t\tvar itemScope = el.attr('itemscope');\n\t\t\tvar itemProp = el.attr('itemprop');\n\t\t\tif (typeof itemScope !== 'undefined') {\n\t\t\t\tif (typeof itemProp !== 'undefined') {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\titems.push(theOneMapper(collectComplexProperty(el), el));\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tel.children().each(function (_, c) {\n\t\t\t\t\tprocessElement(c);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\n\t\tprocessElement(el);\n\t\n\t\tif (items.length === 0) return {};\n\t\tif (items.length === 1) return items[0];\n\t\treturn {'__items' : items};\n\t};\n\t\n\tvar extractFromHead = function () {\n\t\tvar meta = {};\n\t\tjq('head > meta[property^=\"og:\"]').each(function () { var m = jq(this); meta[m.attr('property')] = m.attr('content'); });\n\t\tjq('head > meta[name=\"keywords\"]').each(function () { var m = jq(this); meta[\"keywords\"] = m.attr('content'); });\n\t\treturn theOneMapper(meta);\n\t};\n\tvar noMapper = function(m) {return m;};\n\tvar theOneMapper = noMapper;\n\tvar callbackWrapper = function callbackWrapper(cb){\n\t\treturn function(meta, el){\n\t\t\ttry{\n\t\t\t\treturn cb(meta, el);\n\t\t\t} catch(e){\n\t\t\t\treturn meta;\n\t\t\t}\n\t\t}\n\t}\n\tmodule.exports = {\n\t\textract: findTopLevelItems,\n\t\textractFromHead: extractFromHead,\n\t\tsetMapper : function(mapper){\n\t\t\ttheOneMapper = callbackWrapper(mapper);\n\t\t},\n\t\tnoMapper : noMapper\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t\n\t// Prototype of our jQuery killer ;)\n\tfunction DOMElement() {\n\t}\n\t\n\tDOMElement.prototype.text = function text() {\n\t    return this._element.textContent;\n\t};\n\t\n\tDOMElement.prototype.attr = function attr(name) {\n\t    // emulating the jQuery behaviour\n\t    var attrValue = this._element.getAttribute('' + name);\n\t    if (attrValue === null) return undefined;\n\t    else\n\t        return attrValue;\n\t};\n\t\n\tDOMElement.prototype.prop = function prop(name) {\n\t    return this._element[name];\n\t};\n\t\n\tDOMElement.prototype.children = function children() {\n\t\n\t    var c = this._element.children,\n\t        $doms = [],\n\t        i, n = c.length;\n\t\n\t    for (i = 0; i < n; i++)\n\t        $doms[i] = $DOM(c[i]);\n\t\n\t    return new DOMElements($doms);\n\t};\n\t\n\tfunction DOMElements(els) {\n\t    this._els = els;\n\t    this.length = els.length;\n\t}\n\t\n\tDOMElements.prototype.each = function each(callback) {\n\t    for (var i = 0; i < this._els.length; i++) {\n\t        var element = this._els[i];\n\t        callback.call(element, i, element);\n\t    }\n\t};\n\t\n\tDOMElements.prototype.get = function get(index) {\n\t    return this._els[index];\n\t};\n\t\n\t// query parameter is either an element id or a css-style selector\n\tvar $DOM = module.exports = function $DOM(query) {\n\t\n\t    if (!query || !(typeof query === 'string' || query instanceof Element || query instanceof DOMElement || query instanceof DOMElements)) {\n\t        throw new Error('Invalid argument provided:' + query);\n\t    }\n\t\n\t    if (query instanceof DOMElement || query instanceof DOMElements) return query;\n\t\n\t    if (query instanceof Element) {\n\t        var wrapper = new DOMElement();\n\t        wrapper._element = query;\n\t        return wrapper;\n\t    }\n\t\n\t    query = ('' + query).trim();\n\t\n\t    var elem, elems = [], i, n;\n\t\n\t    try {\n\t        if (query[0] === '#') {         \n\t            elem = document.getElementById(query.substr(1));\n\t            if (elem) elem = [elem]; else elem = [];\n\t        } else {\n\t            elem = document.querySelectorAll(query);\n\t        }\n\t        n = elem.length;\n\t\n\t        for (i = 0; i < n; i++)\n\t            elems.push($DOM(elem[i]));\n\t\n\t        return new DOMElements(elems);\n\t    } catch (exception) {\n\t        throw new Error('Invalid selector: ' + query);\n\t    }\n\t};\n\t\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar microdata = __webpack_require__(11);\n\tvar session = __webpack_require__(4);\n\tvar info = __webpack_require__(14);\n\tvar user = __webpack_require__(6);\n\tvar _ = __webpack_require__(16);\n\t\n\tvar DOMMeta = function (o) {\n\t\tif (o.length < 2) return false;\n\t\treturn (typeof o[1] === 'object' && typeof o[1].tagName === 'undefined') ? o[1] : false;\n\t};\n\t\n\tvar pageview = function () {\n\t\tvar title = document.title;\n\t\tvar location = window.location.protocol + '//' + window.location.host + window.location.pathname + window.location.hash + window.location.search;\n\t\tvar page = window.location.pathname + window.location.search;\n\t\treturn { type: 'pageview', page: page, location: location, title: title };\n\t};\n\t\n\tvar sectionentered = function (section, page) {\n\t\tpage = page || window.location.pathname + window.location.hash + window.location.search;\n\t\treturn { type: 'section_entered', page: page, section: section };\n\t};\n\t\n\tvar custom = function (event) {\n\t\treturn { type: 'custom', event: event };\n\t};\n\t\n\tvar gatherMetaInfo = function gatherMetaInfo(a) {\n\t\tvar event = a[0];\n\t\tvar eventBody = {};\n\t\tif (event) {\n\t\t\tswitch (event.trim()) {\n\t\t\t\tcase 'pageview':\n\t\t\t\t\teventBody = pageview.apply(null, [].slice.call(a, 1));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'sectionentered':\n\t\t\t\t\teventBody = sectionentered.apply(null, [].slice.call(a, 1));\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\teventBody = custom.apply(null, a);\n\t\t\t}\n\t\t\treturn eventBody;\n\t\t}\n\t\tthrow new Error('Upsi! There is something wrong with this event:', a);\n\t};\n\t\n\tvar gatherSystemInfo = function (e) {\n\t\te.t = 1 * new Date();\n\t\te.session = session.getSessionId();\n\t\te.uid = user.getUserId();\n\t\tvar partnerId = window.sessionStorage.getItem('__as.partner_id');\n\t\tvar partnerSId = window.sessionStorage.getItem('__as.partner_sid');\n\t\tif (partnerId) {\n\t\t\te.partner_id = partnerId;\n\t\t}\n\t\tif (partnerSId) {\n\t\t\te.partner_sid = partnerSId;\n\t\t}\n\t\te.tenant_id = window.asaId;\n\t\te.v = info.version();\n\t\treturn e;\n\t};\n\t\n\tmodule.exports = {\n\t\tpackage: function (eventname, domElement, extra) {\n\t\n\t\t\tvar event = gatherMetaInfo(arguments);\n\t\t\tevent = gatherSystemInfo(event);\n\t\t\tif (arguments[0] == 'pageview') {\n\t\t\t\tevent.meta = microdata.extractFromHead();\n\t\t\t\tif (typeof arguments[1] === 'object') {\n\t\t\t\t\tevent.meta = _.override(event.meta, arguments[1]);\n\t\t\t\t}\n\t\t\t} else\n\t\t\t\tif (arguments[0] == 'itemview') {\n\t\t\t\t\tevent.meta = DOMMeta(arguments) || microdata.extract(arguments[1]);\n\t\t\t\t} else\n\t\t\t\t\tif (arguments[0] == 'sectionentered') {\n\t\t\t\t\t\tevent.meta = DOMMeta(arguments) || microdata.extract(arguments[1]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar meta = undefined;\n\t\t\t\t\t\tif (typeof domElement === 'string' || (typeof domElement === 'object' && typeof domElement.tagName !== 'undefined')) { \n\t\t\t\t\t\t\tmeta = microdata.extract(domElement); \n\t\t\t\t\t\t} else\n\t\t\t\t\t\tif (typeof extra === 'undefined' && typeof domElement === 'object') { \n\t\t\t\t\t\t\textra = domElement; \n\t\t\t\t\t\t\tdomElement = null; \n\t\t\t\t\t\t}\n\t\t\t\t\t\tmeta = _.override(meta, extra);\n\t\t\t\t\t\tif (meta !== undefined) event.meta = meta;\n\t\t\t\t\t}\n\t\t\treturn event;\n\t\t}\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar features = __webpack_require__(15);\n\tvar major = 1,\n\t\tminor = 1,\n\t\tbuild = 8;\n\tmodule.exports = {\n\t\tmajor : major,\n\t\tminor: minor,\n\t\tbuild: build,\n\t\tversion : function(){\n\t\t\tvar experiments = '-'+features.experimentsLive();\n\t\t\tif (experiments === '-') experiments = '';\n\t\t\treturn [major, minor, build].join('.') + experiments;}\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar user = __webpack_require__(6);\n\tvar experiments = {};\n\tmodule.exports = {\n\t\tdefineExperiment : function(name, percentage){\n\t\t\texperiments[name] = (user.getUserHash() % 100) <= percentage;\n\t\t},\n\t\tisExperiment : function(name){\n\t\t\tvar exp = experiments[name];\n\t\t\treturn !!exp;\n\t\t},\n\t\tclearExperiments : function(){\n\t\t\texperiments = {};\t\n\t\t},\n\t\texperimentsLive : function(){\n\t\t\tvar result = [];\n\t\t\tfor (var exp in experiments) {\n\t\t\t\tif (experiments.hasOwnProperty(exp)) {\n\t\t\t\t\tif (experiments[exp]) result.push(exp);\t\t\t\t\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result.join('.');\n\t\t},\n\t\tMINI_AJAX : 'miniAjax'\t\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\tvar copyProps = function copyProps(o1, o2){\n\t\tfor (var key in o2) {\n\t\t\tif (o2.hasOwnProperty(key)) {\n\t\t\t\to1[key] = o2[key];\n\t\t\t}\n\t\t}\n\t}\t\n\tmodule.exports = {\n\t\toverride: function (o1, o2) {\n\t\t\tif (!o1 && !o2) return undefined;\n\t\t\tif (!o1 && o2) return o2;\n\t\t\tif (o1 && !o2) return o1;\n\t\t\tvar result = {};\n\t\t\tcopyProps(result, o1);\n\t\t\tcopyProps(result, o2);\n\t\t\treturn result;\n\t\t}\n\t}\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar r = __webpack_require__(18);\n\tvar debug = __webpack_require__(5);\n\tvar ajax = __webpack_require__(21);\n\tvar features = __webpack_require__(15);\n\t\n\tvar pendingSubmission = [], done = true;\n\tvar batchIntervalHandler;\n\t\n\tvar postalAddress = '//inbox.activitystream.com/asa';\n\t// postalAddress = '//localhost:8070/asa';\n\t\n\tvar post = function (packet, callback) {\n\t    var request = ajax.post(postalAddress, 'POST', callback);\n\t\trequest.setRequestHeader('Content-Type', 'text/plain; charset=UTF-8');\n\t\trequest.send(JSON.stringify(packet));\n\t};\n\tvar submitNow = function (ev) {\n\t\tif (!(ev instanceof Array)) ev = [ev];\n\t\tvar packet = {\n\t\t\tev: ev,\n\t\t\tt: 1 * new Date()\n\t\t};\n\t\n\t\tdebug.log('submitting event: ', ev);\n\t\tif (features.isExperiment(features.MINI_AJAX)) {\n\t\t\tpost(packet, function (err, _) {\n\t\t\t\tif (err) {\n\t\t\t\t\tdebug.log('error on server', err);\n\t\t\t\t} else {\n\t\t\t\t\tdebug.log('server got it');\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t} else {\n\t\t\tr\n\t\t\t\t.post(postalAddress)\n\t\t\t\t.set('Content-Type', 'application/json')\n\t\t\t\t.send(packet)\n\t\t\t\t.end(function (err, res) {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tdebug.log('error on server', err);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdebug.log('server got it');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t};\n\tvar submitNow2 = function (ev) {\n\t\tdone = false;\n\t\tif (!(ev instanceof Array)) ev = [ev];\n\t\tvar packet = {\n\t\t\tev: ev,\n\t\t\tt: 1 * new Date()\n\t\t};\n\t\tdebug.log('submitting event: ', ev);\n\t\tr\n\t\t\t.post(postalAddress)\n\t\t\t.set('Content-Type', 'application/json')\n\t\t\t.send(packet)\n\t\t\t.end(function (err, res) {\n\t\t\t\tif (err) {\n\t\t\t\t\tdebug.log('error on server', err);\n\t\t\t\t} else {\n\t\t\t\t\tpendingSubmission.splice(0, ev.length);\n\t\t\t\t\tdebug.log('server got it');\n\t\t\t\t}\n\t\t\t\tdone = true;\n\t\t\t});\n\t};\n\tmodule.exports = {\n\t\tsubmitEvent: submitNow,\n\t\tbatchEvent: function (e) {\n\t\t\tpendingSubmission.push(e);\n\t\t},\n\t\tbatchOn: function () {\n\t\t\tbatchIntervalHandler = setInterval(function batchProcessor() {\n\t\t\t\ttry {\n\t\t\t\t\tif (pendingSubmission.length > 0 && done) {\n\t\t\t\t\t\tvar batchSize = Math.min(pendingSubmission.length, 10);\n\t\t\t\t\t\tsubmitNow2(pendingSubmission.slice(0, batchSize));\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tdebug.log('exception submitting', e);\n\t\t\t\t}\n\t\t\t}, 400);\n\t\t},\n\t\tbatchOff: function () {\n\t\t\tif (!batchIntervalHandler) {\n\t\t\t\tdebug.log('cannot batch off, it is not on');\n\t\t\t} else {\n\t\t\t\tclearInterval(batchIntervalHandler);\n\t\t\t}\n\t\t}\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/**\n\t * Module dependencies.\n\t */\n\t\n\tvar Emitter = __webpack_require__(19);\n\tvar reduce = __webpack_require__(20);\n\t\n\t/**\n\t * Root reference for iframes.\n\t */\n\t\n\tvar root;\n\tif (typeof window !== 'undefined') { // Browser window\n\t  root = window;\n\t} else if (typeof self !== 'undefined') { // Web Worker\n\t  root = self;\n\t} else { // Other environments\n\t  root = this;\n\t}\n\t\n\t/**\n\t * Noop.\n\t */\n\t\n\tfunction noop(){};\n\t\n\t/**\n\t * Check if `obj` is a host object,\n\t * we don't want to serialize these :)\n\t *\n\t * TODO: future proof, move to compoent land\n\t *\n\t * @param {Object} obj\n\t * @return {Boolean}\n\t * @api private\n\t */\n\t\n\tfunction isHost(obj) {\n\t  var str = {}.toString.call(obj);\n\t\n\t  switch (str) {\n\t    case '[object File]':\n\t    case '[object Blob]':\n\t    case '[object FormData]':\n\t      return true;\n\t    default:\n\t      return false;\n\t  }\n\t}\n\t\n\t/**\n\t * Determine XHR.\n\t */\n\t\n\trequest.getXHR = function () {\n\t  if (root.XMLHttpRequest\n\t      && (!root.location || 'file:' != root.location.protocol\n\t          || !root.ActiveXObject)) {\n\t    return new XMLHttpRequest;\n\t  } else {\n\t    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n\t    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n\t    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n\t    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n\t  }\n\t  return false;\n\t};\n\t\n\t/**\n\t * Removes leading and trailing whitespace, added to support IE.\n\t *\n\t * @param {String} s\n\t * @return {String}\n\t * @api private\n\t */\n\t\n\tvar trim = ''.trim\n\t  ? function(s) { return s.trim(); }\n\t  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\t\n\t/**\n\t * Check if `obj` is an object.\n\t *\n\t * @param {Object} obj\n\t * @return {Boolean}\n\t * @api private\n\t */\n\t\n\tfunction isObject(obj) {\n\t  return obj === Object(obj);\n\t}\n\t\n\t/**\n\t * Serialize the given `obj`.\n\t *\n\t * @param {Object} obj\n\t * @return {String}\n\t * @api private\n\t */\n\t\n\tfunction serialize(obj) {\n\t  if (!isObject(obj)) return obj;\n\t  var pairs = [];\n\t  for (var key in obj) {\n\t    if (null != obj[key]) {\n\t      pairs.push(encodeURIComponent(key)\n\t        + '=' + encodeURIComponent(obj[key]));\n\t    }\n\t  }\n\t  return pairs.join('&');\n\t}\n\t\n\t/**\n\t * Expose serialization method.\n\t */\n\t\n\t request.serializeObject = serialize;\n\t\n\t /**\n\t  * Parse the given x-www-form-urlencoded `str`.\n\t  *\n\t  * @param {String} str\n\t  * @return {Object}\n\t  * @api private\n\t  */\n\t\n\tfunction parseString(str) {\n\t  var obj = {};\n\t  var pairs = str.split('&');\n\t  var parts;\n\t  var pair;\n\t\n\t  for (var i = 0, len = pairs.length; i < len; ++i) {\n\t    pair = pairs[i];\n\t    parts = pair.split('=');\n\t    obj[decodeURIComponent(parts[0])] = decodeURIComponent(parts[1]);\n\t  }\n\t\n\t  return obj;\n\t}\n\t\n\t/**\n\t * Expose parser.\n\t */\n\t\n\trequest.parseString = parseString;\n\t\n\t/**\n\t * Default MIME type map.\n\t *\n\t *     superagent.types.xml = 'application/xml';\n\t *\n\t */\n\t\n\trequest.types = {\n\t  html: 'text/html',\n\t  json: 'application/json',\n\t  xml: 'application/xml',\n\t  urlencoded: 'application/x-www-form-urlencoded',\n\t  'form': 'application/x-www-form-urlencoded',\n\t  'form-data': 'application/x-www-form-urlencoded'\n\t};\n\t\n\t/**\n\t * Default serialization map.\n\t *\n\t *     superagent.serialize['application/xml'] = function(obj){\n\t *       return 'generated xml here';\n\t *     };\n\t *\n\t */\n\t\n\t request.serialize = {\n\t   'application/x-www-form-urlencoded': serialize,\n\t   'application/json': JSON.stringify\n\t };\n\t\n\t /**\n\t  * Default parsers.\n\t  *\n\t  *     superagent.parse['application/xml'] = function(str){\n\t  *       return { object parsed from str };\n\t  *     };\n\t  *\n\t  */\n\t\n\trequest.parse = {\n\t  'application/x-www-form-urlencoded': parseString,\n\t  'application/json': JSON.parse\n\t};\n\t\n\t/**\n\t * Parse the given header `str` into\n\t * an object containing the mapped fields.\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api private\n\t */\n\t\n\tfunction parseHeader(str) {\n\t  var lines = str.split(/\\r?\\n/);\n\t  var fields = {};\n\t  var index;\n\t  var line;\n\t  var field;\n\t  var val;\n\t\n\t  lines.pop(); // trailing CRLF\n\t\n\t  for (var i = 0, len = lines.length; i < len; ++i) {\n\t    line = lines[i];\n\t    index = line.indexOf(':');\n\t    field = line.slice(0, index).toLowerCase();\n\t    val = trim(line.slice(index + 1));\n\t    fields[field] = val;\n\t  }\n\t\n\t  return fields;\n\t}\n\t\n\t/**\n\t * Return the mime type for the given `str`.\n\t *\n\t * @param {String} str\n\t * @return {String}\n\t * @api private\n\t */\n\t\n\tfunction type(str){\n\t  return str.split(/ *; */).shift();\n\t};\n\t\n\t/**\n\t * Return header field parameters.\n\t *\n\t * @param {String} str\n\t * @return {Object}\n\t * @api private\n\t */\n\t\n\tfunction params(str){\n\t  return reduce(str.split(/ *; */), function(obj, str){\n\t    var parts = str.split(/ *= */)\n\t      , key = parts.shift()\n\t      , val = parts.shift();\n\t\n\t    if (key && val) obj[key] = val;\n\t    return obj;\n\t  }, {});\n\t};\n\t\n\t/**\n\t * Initialize a new `Response` with the given `xhr`.\n\t *\n\t *  - set flags (.ok, .error, etc)\n\t *  - parse header\n\t *\n\t * Examples:\n\t *\n\t *  Aliasing `superagent` as `request` is nice:\n\t *\n\t *      request = superagent;\n\t *\n\t *  We can use the promise-like API, or pass callbacks:\n\t *\n\t *      request.get('/').end(function(res){});\n\t *      request.get('/', function(res){});\n\t *\n\t *  Sending data can be chained:\n\t *\n\t *      request\n\t *        .post('/user')\n\t *        .send({ name: 'tj' })\n\t *        .end(function(res){});\n\t *\n\t *  Or passed to `.send()`:\n\t *\n\t *      request\n\t *        .post('/user')\n\t *        .send({ name: 'tj' }, function(res){});\n\t *\n\t *  Or passed to `.post()`:\n\t *\n\t *      request\n\t *        .post('/user', { name: 'tj' })\n\t *        .end(function(res){});\n\t *\n\t * Or further reduced to a single call for simple cases:\n\t *\n\t *      request\n\t *        .post('/user', { name: 'tj' }, function(res){});\n\t *\n\t * @param {XMLHTTPRequest} xhr\n\t * @param {Object} options\n\t * @api private\n\t */\n\t\n\tfunction Response(req, options) {\n\t  options = options || {};\n\t  this.req = req;\n\t  this.xhr = this.req.xhr;\n\t  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n\t  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n\t     ? this.xhr.responseText\n\t     : null;\n\t  this.statusText = this.req.xhr.statusText;\n\t  this.setStatusProperties(this.xhr.status);\n\t  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n\t  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n\t  // getResponseHeader still works. so we get content-type even if getting\n\t  // other headers fails.\n\t  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n\t  this.setHeaderProperties(this.header);\n\t  this.body = this.req.method != 'HEAD'\n\t    ? this.parseBody(this.text ? this.text : this.xhr.response)\n\t    : null;\n\t}\n\t\n\t/**\n\t * Get case-insensitive `field` value.\n\t *\n\t * @param {String} field\n\t * @return {String}\n\t * @api public\n\t */\n\t\n\tResponse.prototype.get = function(field){\n\t  return this.header[field.toLowerCase()];\n\t};\n\t\n\t/**\n\t * Set header related properties:\n\t *\n\t *   - `.type` the content type without params\n\t *\n\t * A response of \"Content-Type: text/plain; charset=utf-8\"\n\t * will provide you with a `.type` of \"text/plain\".\n\t *\n\t * @param {Object} header\n\t * @api private\n\t */\n\t\n\tResponse.prototype.setHeaderProperties = function(header){\n\t  // content-type\n\t  var ct = this.header['content-type'] || '';\n\t  this.type = type(ct);\n\t\n\t  // params\n\t  var obj = params(ct);\n\t  for (var key in obj) this[key] = obj[key];\n\t};\n\t\n\t/**\n\t * Force given parser\n\t * \n\t * Sets the body parser no matter type.\n\t * \n\t * @param {Function}\n\t * @api public\n\t */\n\t\n\tResponse.prototype.parse = function(fn){\n\t  this.parser = fn;\n\t  return this;\n\t};\n\t\n\t/**\n\t * Parse the given body `str`.\n\t *\n\t * Used for auto-parsing of bodies. Parsers\n\t * are defined on the `superagent.parse` object.\n\t *\n\t * @param {String} str\n\t * @return {Mixed}\n\t * @api private\n\t */\n\t\n\tResponse.prototype.parseBody = function(str){\n\t  var parse = this.parser || request.parse[this.type];\n\t  return parse && str && (str.length || str instanceof Object)\n\t    ? parse(str)\n\t    : null;\n\t};\n\t\n\t/**\n\t * Set flags such as `.ok` based on `status`.\n\t *\n\t * For example a 2xx response will give you a `.ok` of __true__\n\t * whereas 5xx will be __false__ and `.error` will be __true__. The\n\t * `.clientError` and `.serverError` are also available to be more\n\t * specific, and `.statusType` is the class of error ranging from 1..5\n\t * sometimes useful for mapping respond colors etc.\n\t *\n\t * \"sugar\" properties are also defined for common cases. Currently providing:\n\t *\n\t *   - .noContent\n\t *   - .badRequest\n\t *   - .unauthorized\n\t *   - .notAcceptable\n\t *   - .notFound\n\t *\n\t * @param {Number} status\n\t * @api private\n\t */\n\t\n\tResponse.prototype.setStatusProperties = function(status){\n\t  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n\t  if (status === 1223) {\n\t    status = 204;\n\t  }\n\t\n\t  var type = status / 100 | 0;\n\t\n\t  // status / class\n\t  this.status = this.statusCode = status;\n\t  this.statusType = type;\n\t\n\t  // basics\n\t  this.info = 1 == type;\n\t  this.ok = 2 == type;\n\t  this.clientError = 4 == type;\n\t  this.serverError = 5 == type;\n\t  this.error = (4 == type || 5 == type)\n\t    ? this.toError()\n\t    : false;\n\t\n\t  // sugar\n\t  this.accepted = 202 == status;\n\t  this.noContent = 204 == status;\n\t  this.badRequest = 400 == status;\n\t  this.unauthorized = 401 == status;\n\t  this.notAcceptable = 406 == status;\n\t  this.notFound = 404 == status;\n\t  this.forbidden = 403 == status;\n\t};\n\t\n\t/**\n\t * Return an `Error` representative of this response.\n\t *\n\t * @return {Error}\n\t * @api public\n\t */\n\t\n\tResponse.prototype.toError = function(){\n\t  var req = this.req;\n\t  var method = req.method;\n\t  var url = req.url;\n\t\n\t  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n\t  var err = new Error(msg);\n\t  err.status = this.status;\n\t  err.method = method;\n\t  err.url = url;\n\t\n\t  return err;\n\t};\n\t\n\t/**\n\t * Expose `Response`.\n\t */\n\t\n\trequest.Response = Response;\n\t\n\t/**\n\t * Initialize a new `Request` with the given `method` and `url`.\n\t *\n\t * @param {String} method\n\t * @param {String} url\n\t * @api public\n\t */\n\t\n\tfunction Request(method, url) {\n\t  var self = this;\n\t  Emitter.call(this);\n\t  this._query = this._query || [];\n\t  this.method = method;\n\t  this.url = url;\n\t  this.header = {};\n\t  this._header = {};\n\t  this.on('end', function(){\n\t    var err = null;\n\t    var res = null;\n\t\n\t    try {\n\t      res = new Response(self);\n\t    } catch(e) {\n\t      err = new Error('Parser is unable to parse the response');\n\t      err.parse = true;\n\t      err.original = e;\n\t      return self.callback(err);\n\t    }\n\t\n\t    self.emit('response', res);\n\t\n\t    if (err) {\n\t      return self.callback(err, res);\n\t    }\n\t\n\t    if (res.status >= 200 && res.status < 300) {\n\t      return self.callback(err, res);\n\t    }\n\t\n\t    var new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n\t    new_err.original = err;\n\t    new_err.response = res;\n\t    new_err.status = res.status;\n\t\n\t    self.callback(new_err, res);\n\t  });\n\t}\n\t\n\t/**\n\t * Mixin `Emitter`.\n\t */\n\t\n\tEmitter(Request.prototype);\n\t\n\t/**\n\t * Allow for extension\n\t */\n\t\n\tRequest.prototype.use = function(fn) {\n\t  fn(this);\n\t  return this;\n\t}\n\t\n\t/**\n\t * Set timeout to `ms`.\n\t *\n\t * @param {Number} ms\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.timeout = function(ms){\n\t  this._timeout = ms;\n\t  return this;\n\t};\n\t\n\t/**\n\t * Clear previous timeout.\n\t *\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.clearTimeout = function(){\n\t  this._timeout = 0;\n\t  clearTimeout(this._timer);\n\t  return this;\n\t};\n\t\n\t/**\n\t * Abort the request, and clear potential timeout.\n\t *\n\t * @return {Request}\n\t * @api public\n\t */\n\t\n\tRequest.prototype.abort = function(){\n\t  if (this.aborted) return;\n\t  this.aborted = true;\n\t  this.xhr.abort();\n\t  this.clearTimeout();\n\t  this.emit('abort');\n\t  return this;\n\t};\n\t\n\t/**\n\t * Set header `field` to `val`, or multiple fields with one object.\n\t *\n\t * Examples:\n\t *\n\t *      req.get('/')\n\t *        .set('Accept', 'application/json')\n\t *        .set('X-API-Key', 'foobar')\n\t *        .end(callback);\n\t *\n\t *      req.get('/')\n\t *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n\t *        .end(callback);\n\t *\n\t * @param {String|Object} field\n\t * @param {String} val\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.set = function(field, val){\n\t  if (isObject(field)) {\n\t    for (var key in field) {\n\t      this.set(key, field[key]);\n\t    }\n\t    return this;\n\t  }\n\t  this._header[field.toLowerCase()] = val;\n\t  this.header[field] = val;\n\t  return this;\n\t};\n\t\n\t/**\n\t * Remove header `field`.\n\t *\n\t * Example:\n\t *\n\t *      req.get('/')\n\t *        .unset('User-Agent')\n\t *        .end(callback);\n\t *\n\t * @param {String} field\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.unset = function(field){\n\t  delete this._header[field.toLowerCase()];\n\t  delete this.header[field];\n\t  return this;\n\t};\n\t\n\t/**\n\t * Get case-insensitive header `field` value.\n\t *\n\t * @param {String} field\n\t * @return {String}\n\t * @api private\n\t */\n\t\n\tRequest.prototype.getHeader = function(field){\n\t  return this._header[field.toLowerCase()];\n\t};\n\t\n\t/**\n\t * Set Content-Type to `type`, mapping values from `request.types`.\n\t *\n\t * Examples:\n\t *\n\t *      superagent.types.xml = 'application/xml';\n\t *\n\t *      request.post('/')\n\t *        .type('xml')\n\t *        .send(xmlstring)\n\t *        .end(callback);\n\t *\n\t *      request.post('/')\n\t *        .type('application/xml')\n\t *        .send(xmlstring)\n\t *        .end(callback);\n\t *\n\t * @param {String} type\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.type = function(type){\n\t  this.set('Content-Type', request.types[type] || type);\n\t  return this;\n\t};\n\t\n\t/**\n\t * Set Accept to `type`, mapping values from `request.types`.\n\t *\n\t * Examples:\n\t *\n\t *      superagent.types.json = 'application/json';\n\t *\n\t *      request.get('/agent')\n\t *        .accept('json')\n\t *        .end(callback);\n\t *\n\t *      request.get('/agent')\n\t *        .accept('application/json')\n\t *        .end(callback);\n\t *\n\t * @param {String} accept\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.accept = function(type){\n\t  this.set('Accept', request.types[type] || type);\n\t  return this;\n\t};\n\t\n\t/**\n\t * Set Authorization field value with `user` and `pass`.\n\t *\n\t * @param {String} user\n\t * @param {String} pass\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.auth = function(user, pass){\n\t  var str = btoa(user + ':' + pass);\n\t  this.set('Authorization', 'Basic ' + str);\n\t  return this;\n\t};\n\t\n\t/**\n\t* Add query-string `val`.\n\t*\n\t* Examples:\n\t*\n\t*   request.get('/shoes')\n\t*     .query('size=10')\n\t*     .query({ color: 'blue' })\n\t*\n\t* @param {Object|String} val\n\t* @return {Request} for chaining\n\t* @api public\n\t*/\n\t\n\tRequest.prototype.query = function(val){\n\t  if ('string' != typeof val) val = serialize(val);\n\t  if (val) this._query.push(val);\n\t  return this;\n\t};\n\t\n\t/**\n\t * Write the field `name` and `val` for \"multipart/form-data\"\n\t * request bodies.\n\t *\n\t * ``` js\n\t * request.post('/upload')\n\t *   .field('foo', 'bar')\n\t *   .end(callback);\n\t * ```\n\t *\n\t * @param {String} name\n\t * @param {String|Blob|File} val\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.field = function(name, val){\n\t  if (!this._formData) this._formData = new root.FormData();\n\t  this._formData.append(name, val);\n\t  return this;\n\t};\n\t\n\t/**\n\t * Queue the given `file` as an attachment to the specified `field`,\n\t * with optional `filename`.\n\t *\n\t * ``` js\n\t * request.post('/upload')\n\t *   .attach(new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n\t *   .end(callback);\n\t * ```\n\t *\n\t * @param {String} field\n\t * @param {Blob|File} file\n\t * @param {String} filename\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.attach = function(field, file, filename){\n\t  if (!this._formData) this._formData = new root.FormData();\n\t  this._formData.append(field, file, filename);\n\t  return this;\n\t};\n\t\n\t/**\n\t * Send `data`, defaulting the `.type()` to \"json\" when\n\t * an object is given.\n\t *\n\t * Examples:\n\t *\n\t *       // querystring\n\t *       request.get('/search')\n\t *         .end(callback)\n\t *\n\t *       // multiple data \"writes\"\n\t *       request.get('/search')\n\t *         .send({ search: 'query' })\n\t *         .send({ range: '1..5' })\n\t *         .send({ order: 'desc' })\n\t *         .end(callback)\n\t *\n\t *       // manual json\n\t *       request.post('/user')\n\t *         .type('json')\n\t *         .send('{\"name\":\"tj\"})\n\t *         .end(callback)\n\t *\n\t *       // auto json\n\t *       request.post('/user')\n\t *         .send({ name: 'tj' })\n\t *         .end(callback)\n\t *\n\t *       // manual x-www-form-urlencoded\n\t *       request.post('/user')\n\t *         .type('form')\n\t *         .send('name=tj')\n\t *         .end(callback)\n\t *\n\t *       // auto x-www-form-urlencoded\n\t *       request.post('/user')\n\t *         .type('form')\n\t *         .send({ name: 'tj' })\n\t *         .end(callback)\n\t *\n\t *       // defaults to x-www-form-urlencoded\n\t  *      request.post('/user')\n\t  *        .send('name=tobi')\n\t  *        .send('species=ferret')\n\t  *        .end(callback)\n\t *\n\t * @param {String|Object} data\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.send = function(data){\n\t  var obj = isObject(data);\n\t  var type = this.getHeader('Content-Type');\n\t\n\t  // merge\n\t  if (obj && isObject(this._data)) {\n\t    for (var key in data) {\n\t      this._data[key] = data[key];\n\t    }\n\t  } else if ('string' == typeof data) {\n\t    if (!type) this.type('form');\n\t    type = this.getHeader('Content-Type');\n\t    if ('application/x-www-form-urlencoded' == type) {\n\t      this._data = this._data\n\t        ? this._data + '&' + data\n\t        : data;\n\t    } else {\n\t      this._data = (this._data || '') + data;\n\t    }\n\t  } else {\n\t    this._data = data;\n\t  }\n\t\n\t  if (!obj || isHost(data)) return this;\n\t  if (!type) this.type('json');\n\t  return this;\n\t};\n\t\n\t/**\n\t * Invoke the callback with `err` and `res`\n\t * and handle arity check.\n\t *\n\t * @param {Error} err\n\t * @param {Response} res\n\t * @api private\n\t */\n\t\n\tRequest.prototype.callback = function(err, res){\n\t  var fn = this._callback;\n\t  this.clearTimeout();\n\t  fn(err, res);\n\t};\n\t\n\t/**\n\t * Invoke callback with x-domain error.\n\t *\n\t * @api private\n\t */\n\t\n\tRequest.prototype.crossDomainError = function(){\n\t  var err = new Error('Origin is not allowed by Access-Control-Allow-Origin');\n\t  err.crossDomain = true;\n\t  this.callback(err);\n\t};\n\t\n\t/**\n\t * Invoke callback with timeout error.\n\t *\n\t * @api private\n\t */\n\t\n\tRequest.prototype.timeoutError = function(){\n\t  var timeout = this._timeout;\n\t  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n\t  err.timeout = timeout;\n\t  this.callback(err);\n\t};\n\t\n\t/**\n\t * Enable transmission of cookies with x-domain requests.\n\t *\n\t * Note that for this to work the origin must not be\n\t * using \"Access-Control-Allow-Origin\" with a wildcard,\n\t * and also must set \"Access-Control-Allow-Credentials\"\n\t * to \"true\".\n\t *\n\t * @api public\n\t */\n\t\n\tRequest.prototype.withCredentials = function(){\n\t  this._withCredentials = true;\n\t  return this;\n\t};\n\t\n\t/**\n\t * Initiate request, invoking callback `fn(res)`\n\t * with an instanceof `Response`.\n\t *\n\t * @param {Function} fn\n\t * @return {Request} for chaining\n\t * @api public\n\t */\n\t\n\tRequest.prototype.end = function(fn){\n\t  var self = this;\n\t  var xhr = this.xhr = request.getXHR();\n\t  var query = this._query.join('&');\n\t  var timeout = this._timeout;\n\t  var data = this._formData || this._data;\n\t\n\t  // store callback\n\t  this._callback = fn || noop;\n\t\n\t  // state change\n\t  xhr.onreadystatechange = function(){\n\t    if (4 != xhr.readyState) return;\n\t\n\t    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n\t    // result in the error \"Could not complete the operation due to error c00c023f\"\n\t    var status;\n\t    try { status = xhr.status } catch(e) { status = 0; }\n\t\n\t    if (0 == status) {\n\t      if (self.timedout) return self.timeoutError();\n\t      if (self.aborted) return;\n\t      return self.crossDomainError();\n\t    }\n\t    self.emit('end');\n\t  };\n\t\n\t  // progress\n\t  var handleProgress = function(e){\n\t    if (e.total > 0) {\n\t      e.percent = e.loaded / e.total * 100;\n\t    }\n\t    self.emit('progress', e);\n\t  };\n\t  if (this.hasListeners('progress')) {\n\t    xhr.onprogress = handleProgress;\n\t  }\n\t  try {\n\t    if (xhr.upload && this.hasListeners('progress')) {\n\t      xhr.upload.onprogress = handleProgress;\n\t    }\n\t  } catch(e) {\n\t    // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n\t    // Reported here:\n\t    // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n\t  }\n\t\n\t  // timeout\n\t  if (timeout && !this._timer) {\n\t    this._timer = setTimeout(function(){\n\t      self.timedout = true;\n\t      self.abort();\n\t    }, timeout);\n\t  }\n\t\n\t  // querystring\n\t  if (query) {\n\t    query = request.serializeObject(query);\n\t    this.url += ~this.url.indexOf('?')\n\t      ? '&' + query\n\t      : '?' + query;\n\t  }\n\t\n\t  // initiate request\n\t  xhr.open(this.method, this.url, true);\n\t\n\t  // CORS\n\t  if (this._withCredentials) xhr.withCredentials = true;\n\t\n\t  // body\n\t  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !isHost(data)) {\n\t    // serialize stuff\n\t    var contentType = this.getHeader('Content-Type');\n\t    var serialize = request.serialize[contentType ? contentType.split(';')[0] : ''];\n\t    if (serialize) data = serialize(data);\n\t  }\n\t\n\t  // set header fields\n\t  for (var field in this.header) {\n\t    if (null == this.header[field]) continue;\n\t    xhr.setRequestHeader(field, this.header[field]);\n\t  }\n\t\n\t  // send stuff\n\t  this.emit('request', this);\n\t  xhr.send(data);\n\t  return this;\n\t};\n\t\n\t/**\n\t * Faux promise support\n\t *\n\t * @param {Function} fulfill\n\t * @param {Function} reject\n\t * @return {Request}\n\t */\n\t\n\tRequest.prototype.then = function (fulfill, reject) {\n\t  return this.end(function(err, res) {\n\t    err ? reject(err) : fulfill(res);\n\t  });\n\t}\n\t\n\t/**\n\t * Expose `Request`.\n\t */\n\t\n\trequest.Request = Request;\n\t\n\t/**\n\t * Issue a request:\n\t *\n\t * Examples:\n\t *\n\t *    request('GET', '/users').end(callback)\n\t *    request('/users').end(callback)\n\t *    request('/users', callback)\n\t *\n\t * @param {String} method\n\t * @param {String|Function} url or callback\n\t * @return {Request}\n\t * @api public\n\t */\n\t\n\tfunction request(method, url) {\n\t  // callback\n\t  if ('function' == typeof url) {\n\t    return new Request('GET', method).end(url);\n\t  }\n\t\n\t  // url first\n\t  if (1 == arguments.length) {\n\t    return new Request('GET', method);\n\t  }\n\t\n\t  return new Request(method, url);\n\t}\n\t\n\t/**\n\t * GET `url` with optional callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed|Function} data or fn\n\t * @param {Function} fn\n\t * @return {Request}\n\t * @api public\n\t */\n\t\n\trequest.get = function(url, data, fn){\n\t  var req = request('GET', url);\n\t  if ('function' == typeof data) fn = data, data = null;\n\t  if (data) req.query(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\t\n\t/**\n\t * HEAD `url` with optional callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed|Function} data or fn\n\t * @param {Function} fn\n\t * @return {Request}\n\t * @api public\n\t */\n\t\n\trequest.head = function(url, data, fn){\n\t  var req = request('HEAD', url);\n\t  if ('function' == typeof data) fn = data, data = null;\n\t  if (data) req.send(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\t\n\t/**\n\t * DELETE `url` with optional callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Function} fn\n\t * @return {Request}\n\t * @api public\n\t */\n\t\n\trequest.del = function(url, fn){\n\t  var req = request('DELETE', url);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\t\n\t/**\n\t * PATCH `url` with optional `data` and callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed} data\n\t * @param {Function} fn\n\t * @return {Request}\n\t * @api public\n\t */\n\t\n\trequest.patch = function(url, data, fn){\n\t  var req = request('PATCH', url);\n\t  if ('function' == typeof data) fn = data, data = null;\n\t  if (data) req.send(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\t\n\t/**\n\t * POST `url` with optional `data` and callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed} data\n\t * @param {Function} fn\n\t * @return {Request}\n\t * @api public\n\t */\n\t\n\trequest.post = function(url, data, fn){\n\t  var req = request('POST', url);\n\t  if ('function' == typeof data) fn = data, data = null;\n\t  if (data) req.send(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\t\n\t/**\n\t * PUT `url` with optional `data` and callback `fn(res)`.\n\t *\n\t * @param {String} url\n\t * @param {Mixed|Function} data or fn\n\t * @param {Function} fn\n\t * @return {Request}\n\t * @api public\n\t */\n\t\n\trequest.put = function(url, data, fn){\n\t  var req = request('PUT', url);\n\t  if ('function' == typeof data) fn = data, data = null;\n\t  if (data) req.send(data);\n\t  if (fn) req.end(fn);\n\t  return req;\n\t};\n\t\n\t/**\n\t * Expose `request`.\n\t */\n\t\n\tmodule.exports = request;\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t\n\t/**\n\t * Expose `Emitter`.\n\t */\n\t\n\tmodule.exports = Emitter;\n\t\n\t/**\n\t * Initialize a new `Emitter`.\n\t *\n\t * @api public\n\t */\n\t\n\tfunction Emitter(obj) {\n\t  if (obj) return mixin(obj);\n\t};\n\t\n\t/**\n\t * Mixin the emitter properties.\n\t *\n\t * @param {Object} obj\n\t * @return {Object}\n\t * @api private\n\t */\n\t\n\tfunction mixin(obj) {\n\t  for (var key in Emitter.prototype) {\n\t    obj[key] = Emitter.prototype[key];\n\t  }\n\t  return obj;\n\t}\n\t\n\t/**\n\t * Listen on the given `event` with `fn`.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\t\n\tEmitter.prototype.on =\n\tEmitter.prototype.addEventListener = function(event, fn){\n\t  this._callbacks = this._callbacks || {};\n\t  (this._callbacks[event] = this._callbacks[event] || [])\n\t    .push(fn);\n\t  return this;\n\t};\n\t\n\t/**\n\t * Adds an `event` listener that will be invoked a single\n\t * time then automatically removed.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\t\n\tEmitter.prototype.once = function(event, fn){\n\t  var self = this;\n\t  this._callbacks = this._callbacks || {};\n\t\n\t  function on() {\n\t    self.off(event, on);\n\t    fn.apply(this, arguments);\n\t  }\n\t\n\t  on.fn = fn;\n\t  this.on(event, on);\n\t  return this;\n\t};\n\t\n\t/**\n\t * Remove the given callback for `event` or all\n\t * registered callbacks.\n\t *\n\t * @param {String} event\n\t * @param {Function} fn\n\t * @return {Emitter}\n\t * @api public\n\t */\n\t\n\tEmitter.prototype.off =\n\tEmitter.prototype.removeListener =\n\tEmitter.prototype.removeAllListeners =\n\tEmitter.prototype.removeEventListener = function(event, fn){\n\t  this._callbacks = this._callbacks || {};\n\t\n\t  // all\n\t  if (0 == arguments.length) {\n\t    this._callbacks = {};\n\t    return this;\n\t  }\n\t\n\t  // specific event\n\t  var callbacks = this._callbacks[event];\n\t  if (!callbacks) return this;\n\t\n\t  // remove all handlers\n\t  if (1 == arguments.length) {\n\t    delete this._callbacks[event];\n\t    return this;\n\t  }\n\t\n\t  // remove specific handler\n\t  var cb;\n\t  for (var i = 0; i < callbacks.length; i++) {\n\t    cb = callbacks[i];\n\t    if (cb === fn || cb.fn === fn) {\n\t      callbacks.splice(i, 1);\n\t      break;\n\t    }\n\t  }\n\t  return this;\n\t};\n\t\n\t/**\n\t * Emit `event` with the given args.\n\t *\n\t * @param {String} event\n\t * @param {Mixed} ...\n\t * @return {Emitter}\n\t */\n\t\n\tEmitter.prototype.emit = function(event){\n\t  this._callbacks = this._callbacks || {};\n\t  var args = [].slice.call(arguments, 1)\n\t    , callbacks = this._callbacks[event];\n\t\n\t  if (callbacks) {\n\t    callbacks = callbacks.slice(0);\n\t    for (var i = 0, len = callbacks.length; i < len; ++i) {\n\t      callbacks[i].apply(this, args);\n\t    }\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\t/**\n\t * Return array of callbacks for `event`.\n\t *\n\t * @param {String} event\n\t * @return {Array}\n\t * @api public\n\t */\n\t\n\tEmitter.prototype.listeners = function(event){\n\t  this._callbacks = this._callbacks || {};\n\t  return this._callbacks[event] || [];\n\t};\n\t\n\t/**\n\t * Check if this emitter has `event` handlers.\n\t *\n\t * @param {String} event\n\t * @return {Boolean}\n\t * @api public\n\t */\n\t\n\tEmitter.prototype.hasListeners = function(event){\n\t  return !! this.listeners(event).length;\n\t};\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\t\n\t/**\n\t * Reduce `arr` with `fn`.\n\t *\n\t * @param {Array} arr\n\t * @param {Function} fn\n\t * @param {Mixed} initial\n\t *\n\t * TODO: combatible error handling?\n\t */\n\t\n\tmodule.exports = function(arr, fn, initial){  \n\t  var idx = 0;\n\t  var len = arr.length;\n\t  var curr = arguments.length == 3\n\t    ? initial\n\t    : arr[idx++];\n\t\n\t  while (idx < len) {\n\t    curr = fn.call(null, curr, arr[idx], ++idx, arr);\n\t  }\n\t  \n\t  return curr;\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\tmodule.exports = {\n\t    post: /**\n\t * Make a X-Domain request to url and callback.\n\t *\n\t * @param url {String}\n\t * @param method {String} HTTP verb ('GET', 'POST', 'DELETE', etc.)\n\t * @param data {String} request body\n\t * @param callback {Function} to callback on completion\n\t * @param errback {Function} to callback on error\n\t */\n\t    function xdr(url, method, callback) {\n\t        var req;\n\t\n\t        if (XMLHttpRequest) {\n\t            req = new XMLHttpRequest();\n\t\n\t            if ('withCredentials' in req) {\n\t                req.open(method, url, true);\n\t                req.onerror = function(e){callback(e, null);};\n\t                req.onreadystatechange = function () {\n\t                    if (req.readyState === 4) {\n\t                        if (req.status >= 200 && req.status < 400) {\n\t                            callback(null,req.responseText);\n\t                        } else {\n\t                            callback(new Error('Response returned with non-OK status'));\n\t                        }\n\t                    }\n\t                };\n\t                return req;\n\t            }\n\t        } else if (XDomainRequest) {\n\t            req = new XDomainRequest();\n\t            req.open(method, url);\n\t            req.onerror = function(e){callback(e, null);};\n\t            req.onload = function () {\n\t                callback(null,req.responseText);\n\t            };\n\t            return req;\n\t        } else {\n\t            throw new Error('CORS not supported');\n\t        }\n\t    }\n\t}\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** asa.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5f045019ab4deb14feae\n **/","(function () {\n    // var DNT = navigator.doNotTrack || navigator.msDoNotTrack || window.doNotTrack;\n    // if (DNT && (DNT === 'yes' || DNT.charAt(0) === '1')) return;\n\tvar partner = require('./partner');\n\tvar autoTrack = require('./auto_track');\n\tvar debug = require('./debug');\n\tvar inbox = require('./inbox');\t\n\tvar core = require('./server');\n\tvar features = require('./features');\n\n\ttry {\n\t\tvar pendingEvents = [];\n\t\tif ((typeof window.asa !== 'undefined') && (typeof window.asa.q !== 'undefined')) {\n\t\t\tpendingEvents = window.asa.q;\n\t\t}\n\n\t\twindow.asa = inbox(core.submitEvent);\n\n\t\t// features.defineExperiment(features.MINI_AJAX, 10);\n\n\t\tfor (var i = 0; i < pendingEvents.length; i++) {\n\t\t\twindow.asa.apply(null, pendingEvents[i]);\n\t\t}\n\n\t\tpartner.setPartnerInfo();\n\t\tautoTrack.sections();\n\t} catch (e) {\n\t\tdebug.forceLog('exception during init: ', e);\n\t}\n})();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/index.js\n ** module id = 0\n ** module chunks = 0\n **/","\tvar parseUri = require('./parseuri');\n\tvar updatePartnerInfo = function (){\n\t\tvar partnerIdKey = '__as.partner_id';\n\t\tvar partnerSIdKey = '__as.partner_sid';\n\t\tvar uri = parseUri(window.location.href);\n\t\tvar partnerId = uri.queryKey.__asa_partner_id;\n\t\tvar partnerSId = uri.queryKey.__asa_partner_sid;\n\t\tif (partnerId){\n\t\t\twindow.sessionStorage.setItem(partnerIdKey, uri.queryKey.__asa_partner_id);\t\t\t\t\n\t\t} else {\n\t\t\twindow.sessionStorage.removeItem(partnerIdKey);\n\t\t}\n\t\tif (partnerSId){\n\t\t\twindow.sessionStorage.setItem(partnerSIdKey, uri.queryKey.__asa_partner_sid);\t\t\t\t\n\t\t} else {\n\t\t\twindow.sessionStorage.removeItem(partnerSIdKey);\n\t\t}\n\t};\nmodule.exports = {\n\t\n\tsetPartnerInfo : function(){\n\t\tvar referrer = parseUri(document.referrer).authority;\n\t\tvar currentHost = parseUri(window.location.origin).authority;\n\t\tif (referrer != currentHost){\n\t\t\tupdatePartnerInfo();\n\t\t}\n\t}\n\t\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/partner.js\n ** module id = 1\n ** module chunks = 0\n **/","// parseUri 1.2.2\n// (c) Steven Levithan <stevenlevithan.com>\n// MIT License\n\nfunction parseUri (str) {\n\tvar\to   = parseUri.options,\n\t\tm   = o.parser[o.strictMode ? \"strict\" : \"loose\"].exec(str),\n\t\turi = {},\n\t\ti   = 14;\n\n\twhile (i--) uri[o.key[i]] = m[i] || \"\";\n\n\turi[o.q.name] = {};\n\turi[o.key[12]].replace(o.q.parser, function ($0, $1, $2) {\n\t\tif ($1) uri[o.q.name][$1] = $2;\n\t});\n\n\treturn uri;\n}\n\nparseUri.options = {\n\tstrictMode: false,\n\tkey: [\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"],\n\tq:   {\n\t\tname:   \"queryKey\",\n\t\tparser: /(?:^|&)([^&=]*)=?([^&]*)/g\n\t},\n\tparser: {\n\t\tstrict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n\t\tloose:  /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n\t}\n};\n\nmodule.exports = parseUri;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/parseuri.js\n ** module id = 2\n ** module chunks = 0 1\n **/","var session = require('./session');\nvar parseUri = require('./parseuri');\nmodule.exports = {\n\tsections: function () {\n\t\tvar locationHashChanged = function (oldHash, newHash) {\n\t\t\tasa('sectionentered', newHash.substr(1));\n\t\t};\n\t\tvar storedHash = '';\n\t\twindow.setInterval(function () {\n\t\t\tif (window.location.hash != storedHash) {\n\t\t\t\tvar newHash = window.location.hash;\n\t\t\t\tlocationHashChanged(storedHash, newHash);\n\t\t\t\tstoredHash = newHash;\n\t\t\t}\n\t\t}, 100);\n\t},\n\n\tlinks: function (domains) {\n\t\tvar domainsTracked = domains;\n\t\tvar tracker = function (ev) {\n\t\t\tvar href = ev.target.href;\n\t\t\tif (href) {\n\t\t\t\tvar destination = parseUri(href);\n\t\t\t\tif (domainsTracked.indexOf(destination.authority) > -1) {\n\t\t\t\t\tvar alreadyHasParams = ev.target.href.indexOf('?') !== -1;\n\t\t\t\t\thref = href + (alreadyHasParams ? '&' : '?') + '__asa_partner_id=' + encodeURIComponent(window.asaId) + '&__asa_partner_sid=' + encodeURIComponent(session.getSessionId());\n\t\t\t\t\tev.target.href = href;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tdocument.addEventListener('mousedown', tracker);\n\t\tdocument.addEventListener('keyup', tracker);\n\t\tdocument.addEventListener('touchstart', tracker);\n\t}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/auto_track.js\n ** module id = 3\n ** module chunks = 0 1\n **/","var debug = require('./debug');\nvar user = require('./user');\nvar randomness = require('./randomness');\nvar hash = require('./domain_hash');\n\n\nvar SESSION_EXPIRE_TIMEOUT = 30 * 60;\n// SESSION_EXPIRE_TIMEOUT = 30 * 60;\nvar SESSION_COOKIE_NAME = '__asa_session';\n\nvar store = {\n\thasItem: function (name) {\n\t\tvar item = window.sessionStorage.getItem(name);\n\t\treturn item && JSON.parse(item).t > (1 * new Date());\n\t},\n\tgetItem: function (name) {\n\t\treturn JSON.parse(window.sessionStorage.getItem(name)).v;\n\t},\n\tsetItem: function (name, value, timeout) {\n\t\twindow.sessionStorage.setItem(name, JSON.stringify({\n\t\t\tv: value,\n\t\t\tt: (1 * new Date()) + (1000 * timeout)\n\t\t}));\n\t},\n\tupdateTimeout: function (name, timeout) {\n\t\tvar item = JSON.parse(window.sessionStorage.getItem(name));\n\t\tstore.setItem(name, item.v, timeout);\n\t}\n};\n\nvar sessionStore = store;\nvar ourSessionManager = {\n\textendSession: function () {\n\t\tif (!sessionStore.hasItem(SESSION_COOKIE_NAME)) {\n\t\t\tdebug.log('starting session');\n\t\t\tsessionStore.setItem(SESSION_COOKIE_NAME, user.getDomainId() + '.' + hash(user.getUserId() + '.' + randomness.getNumber()), SESSION_EXPIRE_TIMEOUT);\n\t\t} else {\n\t\t\tsessionStore.updateTimeout(SESSION_COOKIE_NAME, SESSION_EXPIRE_TIMEOUT);\n\t\t}\n\t},\n\n\tgetSessionId: function () {\n\t\treturn sessionStore.getItem(SESSION_COOKIE_NAME);\n\t}\n    \n};\nvar providedSessionManager = function(getSessionId, extendSession){\n    return {\n        extendSession: function () {\n            if (extendSession) extendSession();\n        },\n    \n        getSessionId: function () {\n            return getSessionId();\n        }    \n    };\n};\nvar sessionManager = ourSessionManager;\nmodule.exports = {\n\textendSession: function () {\n        sessionManager.extendSession();\n\t},\n\n\tgetSessionId: function () {\n\t\treturn sessionManager.getSessionId();\n\t},\n    customSession : function(getSession, extendSession){\n        sessionManager = providedSessionManager(getSession, extendSession);\n    }\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/session.js\n ** module id = 4\n ** module chunks = 0 1\n **/","// old ie\nif (typeof console === 'undefined') {\n\twindow.console = {};\n}\nif (typeof console.log === 'undefined'){\n\twindow.console.log = function(){};\n}\n\nvar noLog = function noLog() { };\nvar doLog = function doLog() {\n\t[].unshift.call(arguments, 'asa.js:');\n\tconsole.log.apply(console, arguments);\n};\nvar me = module.exports = {\n\tlog: noLog,\n\tsetDebugMode: function (on) {\n\t\tme.log = on ? doLog : noLog;\n\t},\n\tforceLog:doLog\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/debug.js\n ** module id = 5\n ** module chunks = 0 1\n **/","var cookies = require('./cookies');\nvar hash = require('./domain_hash');\nvar randomness = require('./randomness');\nvar USER_ID_COOKIE = '__as_user';\nvar generateUserId = function () {\n\treturn hash(window.location.host) + '.' + hash('' + randomness.getNumber());\n};\nvar getUserId = function () {\n\tif (!cookies.hasItem(USER_ID_COOKIE)) {\n\t\tcookies.setItem(USER_ID_COOKIE, generateUserId(), Infinity, '/');\n\t}\n\n\treturn cookies.getItem(USER_ID_COOKIE);\n};\n\nmodule.exports = {\n\tgetUserId: getUserId,\n\tgetDomainId: function () {\n\t\treturn hash(window.location.host);\n\t},\n\tgetUserHash: function () {\n\t\treturn parseInt(getUserId().split('.')[1], 10);\n\t}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/user.js\n ** module id = 6\n ** module chunks = 0 1\n **/","/*\\\n|*|\n|*|  :: cookies.js ::\n|*|\n|*|  A complete cookies reader/writer framework with full unicode support.\n|*|\n|*|  Revision #1 - September 4, 2014\n|*|\n|*|  https://developer.mozilla.org/en-US/docs/Web/API/document.cookie\n|*|  https://developer.mozilla.org/User:fusionchess\n|*|\n|*|  This framework is released under the GNU Public License, version 3 or later.\n|*|  http://www.gnu.org/licenses/gpl-3.0-standalone.html\n|*|\n|*|  Syntaxes:\n|*|\n|*|  * docCookies.setItem(name, value[, end[, path[, domain[, secure]]]])\n|*|  * docCookies.getItem(name)\n|*|  * docCookies.removeItem(name[, path[, domain]])\n|*|  * docCookies.hasItem(name)\n|*|  * docCookies.keys()\n|*|\n\\*/\n\nvar docCookies = {\n  getItem: function (sKey) {\n    if (!sKey) { return null; }\n    return decodeURIComponent(document.cookie.replace(new RegExp(\"(?:(?:^|.*;)\\\\s*\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$\"), \"$1\")) || null;\n  },\n  setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {\n    if (!sKey || /^(?:expires|max\\-age|path|domain|secure)$/i.test(sKey)) { return false; }\n    var sExpires = \"\";\n    if (vEnd) {\n      switch (vEnd.constructor) {\n        case Number:\n          sExpires = vEnd === Infinity ? \"; expires=Fri, 31 Dec 9999 23:59:59 GMT\" : \"; max-age=\" + vEnd;\n          break;\n        case String:\n          sExpires = \"; expires=\" + vEnd;\n          break;\n        case Date:\n          sExpires = \"; expires=\" + vEnd.toUTCString();\n          break;\n      }\n    }\n    document.cookie = encodeURIComponent(sKey) + \"=\" + encodeURIComponent(sValue) + sExpires + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\") + (bSecure ? \"; secure\" : \"\");\n    return true;\n  },\n  removeItem: function (sKey, sPath, sDomain) {\n    if (!this.hasItem(sKey)) { return false; }\n    document.cookie = encodeURIComponent(sKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 GMT\" + (sDomain ? \"; domain=\" + sDomain : \"\") + (sPath ? \"; path=\" + sPath : \"\");\n    return true;\n  },\n  hasItem: function (sKey) {\n    if (!sKey) { return false; }\n    return (new RegExp(\"(?:^|;\\\\s*)\" + encodeURIComponent(sKey).replace(/[\\-\\.\\+\\*]/g, \"\\\\$&\") + \"\\\\s*\\\\=\")).test(document.cookie);\n  },\n  keys: function () {\n    var aKeys = document.cookie.replace(/((?:^|\\s*;)[^\\=]+)(?=;|$)|^\\s*|\\s*(?:\\=[^;]*)?(?:\\1|$)/g, \"\").split(/\\s*(?:\\=[^;]*)?;\\s*/);\n    for (var nLen = aKeys.length, nIdx = 0; nIdx < nLen; nIdx++) { aKeys[nIdx] = decodeURIComponent(aKeys[nIdx]); }\n    return aKeys;\n  }\n};\n\nmodule.exports = docCookies;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/cookies.js\n ** module id = 7\n ** module chunks = 0 1\n **/","// this hashing algorithm is as found in some version of Google Analytics\n/* jshint ignore:start */\nmodule.exports = function hash(d) {\n    var a = 1, c = 0, h, o;\n    if (d) {\n        a = 0;\n        for (h = d[\"length\"] - 1; h >= 0; h--) {\n            o = d.charCodeAt(h);\n            a = (a << 6 & 268435455) + o + (o << 14);\n            c = a & 266338304;\n            a = c != 0 ? a ^ c >> 21 : a\n        }\n    }\n    return a\n};\n/* jshint ignore:end */\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/domain_hash.js\n ** module id = 8\n ** module chunks = 0 1\n **/","module.exports = {\n\tgetNumber : function(){\n\t\treturn Math.round(Math.random() * new Date());\n\t}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/randomness.js\n ** module id = 9\n ** module chunks = 0 1\n **/","var session = require('./session');\nvar microdata = require('./microdata');\nvar autoTrack = require('./auto_track');\nvar debug = require('./debug');\nvar event = require('./event');\n\nmodule.exports = function inbox(transport) {\n\treturn function () {\n\t\ttry {\n\t\t\tif (arguments[0] == 'session') {\n\t\t\t\tsession.customSession(arguments[1], arguments[2])\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (arguments[0] == 'connectedPartners') {\n\t\t\t\tautoTrack.links(arguments[1]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (arguments[0] == 'tenantId') {\n\t\t\t\twindow.asaId = arguments[1];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (arguments[0] == 'debug') {\n\t\t\t\tdebug.setDebugMode(arguments[1]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (arguments[0] == 'transformer') {\n\t\t\t\tmicrodata.setMapper(arguments[1]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsession.extendSession();\n\t\t\t\n\t\t\ttransport(event.package.apply(event, arguments));\n\t\t} catch (e) {\n\t\t\tdebug.forceLog('inbox exception:', e);\n\t\t}\n\t};\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/inbox.js\n ** module id = 10\n ** module chunks = 0 1\n **/","// var jq = $;\nvar jq = require('./DOM');\nvar debug = require('./debug');\n\nvar collectReferencedProperties = function (element, item) {\n\tvar refString = element.attr('itemref');\n\tif (typeof refString !== 'undefined') {\n\t\tvar refs = refString.split(' ');\n\t\tfor (var i = 0; i < refs.length; i++) {\n\t\t\tvar ref = refs[i];\n\t\t\tvar refItem = jq('#' + ref);\n\t\t\tif (refItem.length === 1){\n\t\t\t\tcollectProperties(refItem.get(0), item);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdebug.log('missing metadata element', ref);\n\t\t\t}\n\t\t}\n\t}\n};\n\nvar collectComplexProperty = function (element) {\n\tvar item = {\n\t\t\"type\": element.attr(\"itemtype\"),\n\t\t\"properties\": {}\n\t};\n\tcollectReferencedProperties(element, item);\n\tcollectProperties(element, item);\n\treturn item;\n};\n\nvar collectSimpleProperty = function (el) {\n\tvar tag = el.prop('tagName');\n\tswitch (tag) {\n\t\tcase 'TIME': return el.attr('datetime');\n\t\tcase 'A':\n\t\tcase 'LINK':\n\t\t\treturn el.attr('href');\n\t\tdefault:\n\t\t\treturn el.prop(\"content\") || el.text() || el.attr(\"src\");\n\t}\n\n};\n\nvar collectProperties = function (el, item) {\n\tel.children().each(function (_, c) {\n\t\tvar child = jq(c);\n\t\tvar prop = child.attr('itemprop');\n\t\tif (typeof prop === 'string') {\n\t\t\tif (typeof child.attr('itemscope') !== 'undefined') {\n\t\t\t\titem.properties[prop] = collectComplexProperty(child);\n\t\t\t} else {\n\t\t\t\titem.properties[prop] = collectSimpleProperty(child);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof child.attr('itemscope') == 'undefined') {\n\t\t\tcollectProperties(child, item);\n\t\t}\n\t});\n};\n\nvar findTopLevelItems = function (el) {\n\tif (!el) return undefined; \n\tvar items = [];\n\tif (typeof el === 'string') { el = jq('#'+el).get(0); }\n\telse if (typeof el === 'object' && typeof el.tagName === 'string') { el = jq(el); }\n\telse return {};\n\n\tvar processElement = function (e) {\n\t\tvar el = jq(e);\n\t\tvar itemScope = el.attr('itemscope');\n\t\tvar itemProp = el.attr('itemprop');\n\t\tif (typeof itemScope !== 'undefined') {\n\t\t\tif (typeof itemProp !== 'undefined') {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\titems.push(theOneMapper(collectComplexProperty(el), el));\n\t\t\t}\n\t\t} else {\n\t\t\tel.children().each(function (_, c) {\n\t\t\t\tprocessElement(c);\n\t\t\t});\n\t\t}\n\t};\n\n\tprocessElement(el);\n\n\tif (items.length === 0) return {};\n\tif (items.length === 1) return items[0];\n\treturn {'__items' : items};\n};\n\nvar extractFromHead = function () {\n\tvar meta = {};\n\tjq('head > meta[property^=\"og:\"]').each(function () { var m = jq(this); meta[m.attr('property')] = m.attr('content'); });\n\tjq('head > meta[name=\"keywords\"]').each(function () { var m = jq(this); meta[\"keywords\"] = m.attr('content'); });\n\treturn theOneMapper(meta);\n};\nvar noMapper = function(m) {return m;};\nvar theOneMapper = noMapper;\nvar callbackWrapper = function callbackWrapper(cb){\n\treturn function(meta, el){\n\t\ttry{\n\t\t\treturn cb(meta, el);\n\t\t} catch(e){\n\t\t\treturn meta;\n\t\t}\n\t}\n}\nmodule.exports = {\n\textract: findTopLevelItems,\n\textractFromHead: extractFromHead,\n\tsetMapper : function(mapper){\n\t\ttheOneMapper = callbackWrapper(mapper);\n\t},\n\tnoMapper : noMapper\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/microdata.js\n ** module id = 11\n ** module chunks = 0 1\n **/","\n// Prototype of our jQuery killer ;)\nfunction DOMElement() {\n}\n\nDOMElement.prototype.text = function text() {\n    return this._element.textContent;\n};\n\nDOMElement.prototype.attr = function attr(name) {\n    // emulating the jQuery behaviour\n    var attrValue = this._element.getAttribute('' + name);\n    if (attrValue === null) return undefined;\n    else\n        return attrValue;\n};\n\nDOMElement.prototype.prop = function prop(name) {\n    return this._element[name];\n};\n\nDOMElement.prototype.children = function children() {\n\n    var c = this._element.children,\n        $doms = [],\n        i, n = c.length;\n\n    for (i = 0; i < n; i++)\n        $doms[i] = $DOM(c[i]);\n\n    return new DOMElements($doms);\n};\n\nfunction DOMElements(els) {\n    this._els = els;\n    this.length = els.length;\n}\n\nDOMElements.prototype.each = function each(callback) {\n    for (var i = 0; i < this._els.length; i++) {\n        var element = this._els[i];\n        callback.call(element, i, element);\n    }\n};\n\nDOMElements.prototype.get = function get(index) {\n    return this._els[index];\n};\n\n// query parameter is either an element id or a css-style selector\nvar $DOM = module.exports = function $DOM(query) {\n\n    if (!query || !(typeof query === 'string' || query instanceof Element || query instanceof DOMElement || query instanceof DOMElements)) {\n        throw new Error('Invalid argument provided:' + query);\n    }\n\n    if (query instanceof DOMElement || query instanceof DOMElements) return query;\n\n    if (query instanceof Element) {\n        var wrapper = new DOMElement();\n        wrapper._element = query;\n        return wrapper;\n    }\n\n    query = ('' + query).trim();\n\n    var elem, elems = [], i, n;\n\n    try {\n        if (query[0] === '#') {         \n            elem = document.getElementById(query.substr(1));\n            if (elem) elem = [elem]; else elem = [];\n        } else {\n            elem = document.querySelectorAll(query);\n        }\n        n = elem.length;\n\n        for (i = 0; i < n; i++)\n            elems.push($DOM(elem[i]));\n\n        return new DOMElements(elems);\n    } catch (exception) {\n        throw new Error('Invalid selector: ' + query);\n    }\n};\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/DOM.js\n ** module id = 12\n ** module chunks = 0 1\n **/","var microdata = require('./microdata');\nvar session = require('./session');\nvar info = require('./version');\nvar user = require('./user');\nvar _ = require('./utils');\n\nvar DOMMeta = function (o) {\n\tif (o.length < 2) return false;\n\treturn (typeof o[1] === 'object' && typeof o[1].tagName === 'undefined') ? o[1] : false;\n};\n\nvar pageview = function () {\n\tvar title = document.title;\n\tvar location = window.location.protocol + '//' + window.location.host + window.location.pathname + window.location.hash + window.location.search;\n\tvar page = window.location.pathname + window.location.search;\n\treturn { type: 'pageview', page: page, location: location, title: title };\n};\n\nvar sectionentered = function (section, page) {\n\tpage = page || window.location.pathname + window.location.hash + window.location.search;\n\treturn { type: 'section_entered', page: page, section: section };\n};\n\nvar custom = function (event) {\n\treturn { type: 'custom', event: event };\n};\n\nvar gatherMetaInfo = function gatherMetaInfo(a) {\n\tvar event = a[0];\n\tvar eventBody = {};\n\tif (event) {\n\t\tswitch (event.trim()) {\n\t\t\tcase 'pageview':\n\t\t\t\teventBody = pageview.apply(null, [].slice.call(a, 1));\n\t\t\t\tbreak;\n\t\t\tcase 'sectionentered':\n\t\t\t\teventBody = sectionentered.apply(null, [].slice.call(a, 1));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\teventBody = custom.apply(null, a);\n\t\t}\n\t\treturn eventBody;\n\t}\n\tthrow new Error('Upsi! There is something wrong with this event:', a);\n};\n\nvar gatherSystemInfo = function (e) {\n\te.t = 1 * new Date();\n\te.session = session.getSessionId();\n\te.uid = user.getUserId();\n\tvar partnerId = window.sessionStorage.getItem('__as.partner_id');\n\tvar partnerSId = window.sessionStorage.getItem('__as.partner_sid');\n\tif (partnerId) {\n\t\te.partner_id = partnerId;\n\t}\n\tif (partnerSId) {\n\t\te.partner_sid = partnerSId;\n\t}\n\te.tenant_id = window.asaId;\n\te.v = info.version();\n\treturn e;\n};\n\nmodule.exports = {\n\tpackage: function (eventname, domElement, extra) {\n\n\t\tvar event = gatherMetaInfo(arguments);\n\t\tevent = gatherSystemInfo(event);\n\t\tif (arguments[0] == 'pageview') {\n\t\t\tevent.meta = microdata.extractFromHead();\n\t\t\tif (typeof arguments[1] === 'object') {\n\t\t\t\tevent.meta = _.override(event.meta, arguments[1]);\n\t\t\t}\n\t\t} else\n\t\t\tif (arguments[0] == 'itemview') {\n\t\t\t\tevent.meta = DOMMeta(arguments) || microdata.extract(arguments[1]);\n\t\t\t} else\n\t\t\t\tif (arguments[0] == 'sectionentered') {\n\t\t\t\t\tevent.meta = DOMMeta(arguments) || microdata.extract(arguments[1]);\n\t\t\t\t} else {\n\t\t\t\t\tvar meta = undefined;\n\t\t\t\t\tif (typeof domElement === 'string' || (typeof domElement === 'object' && typeof domElement.tagName !== 'undefined')) { \n\t\t\t\t\t\tmeta = microdata.extract(domElement); \n\t\t\t\t\t} else\n\t\t\t\t\tif (typeof extra === 'undefined' && typeof domElement === 'object') { \n\t\t\t\t\t\textra = domElement; \n\t\t\t\t\t\tdomElement = null; \n\t\t\t\t\t}\n\t\t\t\t\tmeta = _.override(meta, extra);\n\t\t\t\t\tif (meta !== undefined) event.meta = meta;\n\t\t\t\t}\n\t\treturn event;\n\t}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/event.js\n ** module id = 13\n ** module chunks = 0 1\n **/","var features = require('./features');\nvar major = 1,\n\tminor = 1,\n\tbuild = 8;\nmodule.exports = {\n\tmajor : major,\n\tminor: minor,\n\tbuild: build,\n\tversion : function(){\n\t\tvar experiments = '-'+features.experimentsLive();\n\t\tif (experiments === '-') experiments = '';\n\t\treturn [major, minor, build].join('.') + experiments;}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/version.js\n ** module id = 14\n ** module chunks = 0 1\n **/","var user = require('./user');\nvar experiments = {};\nmodule.exports = {\n\tdefineExperiment : function(name, percentage){\n\t\texperiments[name] = (user.getUserHash() % 100) <= percentage;\n\t},\n\tisExperiment : function(name){\n\t\tvar exp = experiments[name];\n\t\treturn !!exp;\n\t},\n\tclearExperiments : function(){\n\t\texperiments = {};\t\n\t},\n\texperimentsLive : function(){\n\t\tvar result = [];\n\t\tfor (var exp in experiments) {\n\t\t\tif (experiments.hasOwnProperty(exp)) {\n\t\t\t\tif (experiments[exp]) result.push(exp);\t\t\t\t\n\t\t\t}\n\t\t}\n\t\treturn result.join('.');\n\t},\n\tMINI_AJAX : 'miniAjax'\t\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/features.js\n ** module id = 15\n ** module chunks = 0 1\n **/","var copyProps = function copyProps(o1, o2){\n\tfor (var key in o2) {\n\t\tif (o2.hasOwnProperty(key)) {\n\t\t\to1[key] = o2[key];\n\t\t}\n\t}\n}\t\nmodule.exports = {\n\toverride: function (o1, o2) {\n\t\tif (!o1 && !o2) return undefined;\n\t\tif (!o1 && o2) return o2;\n\t\tif (o1 && !o2) return o1;\n\t\tvar result = {};\n\t\tcopyProps(result, o1);\n\t\tcopyProps(result, o2);\n\t\treturn result;\n\t}\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/utils.js\n ** module id = 16\n ** module chunks = 0 1\n **/","var r = require('superagent');\nvar debug = require('./debug');\nvar ajax = require('./ajax');\nvar features = require('./features');\n\nvar pendingSubmission = [], done = true;\nvar batchIntervalHandler;\n\nvar postalAddress = '//inbox.activitystream.com/asa';\n// postalAddress = '//localhost:8070/asa';\n\nvar post = function (packet, callback) {\n    var request = ajax.post(postalAddress, 'POST', callback);\n\trequest.setRequestHeader('Content-Type', 'text/plain; charset=UTF-8');\n\trequest.send(JSON.stringify(packet));\n};\nvar submitNow = function (ev) {\n\tif (!(ev instanceof Array)) ev = [ev];\n\tvar packet = {\n\t\tev: ev,\n\t\tt: 1 * new Date()\n\t};\n\n\tdebug.log('submitting event: ', ev);\n\tif (features.isExperiment(features.MINI_AJAX)) {\n\t\tpost(packet, function (err, _) {\n\t\t\tif (err) {\n\t\t\t\tdebug.log('error on server', err);\n\t\t\t} else {\n\t\t\t\tdebug.log('server got it');\n\t\t\t}\n\t\t});\n\n\t} else {\n\t\tr\n\t\t\t.post(postalAddress)\n\t\t\t.set('Content-Type', 'application/json')\n\t\t\t.send(packet)\n\t\t\t.end(function (err, res) {\n\t\t\t\tif (err) {\n\t\t\t\t\tdebug.log('error on server', err);\n\t\t\t\t} else {\n\t\t\t\t\tdebug.log('server got it');\n\t\t\t\t}\n\t\t\t});\n\t}\n};\nvar submitNow2 = function (ev) {\n\tdone = false;\n\tif (!(ev instanceof Array)) ev = [ev];\n\tvar packet = {\n\t\tev: ev,\n\t\tt: 1 * new Date()\n\t};\n\tdebug.log('submitting event: ', ev);\n\tr\n\t\t.post(postalAddress)\n\t\t.set('Content-Type', 'application/json')\n\t\t.send(packet)\n\t\t.end(function (err, res) {\n\t\t\tif (err) {\n\t\t\t\tdebug.log('error on server', err);\n\t\t\t} else {\n\t\t\t\tpendingSubmission.splice(0, ev.length);\n\t\t\t\tdebug.log('server got it');\n\t\t\t}\n\t\t\tdone = true;\n\t\t});\n};\nmodule.exports = {\n\tsubmitEvent: submitNow,\n\tbatchEvent: function (e) {\n\t\tpendingSubmission.push(e);\n\t},\n\tbatchOn: function () {\n\t\tbatchIntervalHandler = setInterval(function batchProcessor() {\n\t\t\ttry {\n\t\t\t\tif (pendingSubmission.length > 0 && done) {\n\t\t\t\t\tvar batchSize = Math.min(pendingSubmission.length, 10);\n\t\t\t\t\tsubmitNow2(pendingSubmission.slice(0, batchSize));\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tdebug.log('exception submitting', e);\n\t\t\t}\n\t\t}, 400);\n\t},\n\tbatchOff: function () {\n\t\tif (!batchIntervalHandler) {\n\t\t\tdebug.log('cannot batch off, it is not on');\n\t\t} else {\n\t\t\tclearInterval(batchIntervalHandler);\n\t\t}\n\t}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/server.js\n ** module id = 17\n ** module chunks = 0 1\n **/","/**\n * Module dependencies.\n */\n\nvar Emitter = require('emitter');\nvar reduce = require('reduce');\n\n/**\n * Root reference for iframes.\n */\n\nvar root;\nif (typeof window !== 'undefined') { // Browser window\n  root = window;\n} else if (typeof self !== 'undefined') { // Web Worker\n  root = self;\n} else { // Other environments\n  root = this;\n}\n\n/**\n * Noop.\n */\n\nfunction noop(){};\n\n/**\n * Check if `obj` is a host object,\n * we don't want to serialize these :)\n *\n * TODO: future proof, move to compoent land\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isHost(obj) {\n  var str = {}.toString.call(obj);\n\n  switch (str) {\n    case '[object File]':\n    case '[object Blob]':\n    case '[object FormData]':\n      return true;\n    default:\n      return false;\n  }\n}\n\n/**\n * Determine XHR.\n */\n\nrequest.getXHR = function () {\n  if (root.XMLHttpRequest\n      && (!root.location || 'file:' != root.location.protocol\n          || !root.ActiveXObject)) {\n    return new XMLHttpRequest;\n  } else {\n    try { return new ActiveXObject('Microsoft.XMLHTTP'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.6.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP.3.0'); } catch(e) {}\n    try { return new ActiveXObject('Msxml2.XMLHTTP'); } catch(e) {}\n  }\n  return false;\n};\n\n/**\n * Removes leading and trailing whitespace, added to support IE.\n *\n * @param {String} s\n * @return {String}\n * @api private\n */\n\nvar trim = ''.trim\n  ? function(s) { return s.trim(); }\n  : function(s) { return s.replace(/(^\\s*|\\s*$)/g, ''); };\n\n/**\n * Check if `obj` is an object.\n *\n * @param {Object} obj\n * @return {Boolean}\n * @api private\n */\n\nfunction isObject(obj) {\n  return obj === Object(obj);\n}\n\n/**\n * Serialize the given `obj`.\n *\n * @param {Object} obj\n * @return {String}\n * @api private\n */\n\nfunction serialize(obj) {\n  if (!isObject(obj)) return obj;\n  var pairs = [];\n  for (var key in obj) {\n    if (null != obj[key]) {\n      pairs.push(encodeURIComponent(key)\n        + '=' + encodeURIComponent(obj[key]));\n    }\n  }\n  return pairs.join('&');\n}\n\n/**\n * Expose serialization method.\n */\n\n request.serializeObject = serialize;\n\n /**\n  * Parse the given x-www-form-urlencoded `str`.\n  *\n  * @param {String} str\n  * @return {Object}\n  * @api private\n  */\n\nfunction parseString(str) {\n  var obj = {};\n  var pairs = str.split('&');\n  var parts;\n  var pair;\n\n  for (var i = 0, len = pairs.length; i < len; ++i) {\n    pair = pairs[i];\n    parts = pair.split('=');\n    obj[decodeURIComponent(parts[0])] = decodeURIComponent(parts[1]);\n  }\n\n  return obj;\n}\n\n/**\n * Expose parser.\n */\n\nrequest.parseString = parseString;\n\n/**\n * Default MIME type map.\n *\n *     superagent.types.xml = 'application/xml';\n *\n */\n\nrequest.types = {\n  html: 'text/html',\n  json: 'application/json',\n  xml: 'application/xml',\n  urlencoded: 'application/x-www-form-urlencoded',\n  'form': 'application/x-www-form-urlencoded',\n  'form-data': 'application/x-www-form-urlencoded'\n};\n\n/**\n * Default serialization map.\n *\n *     superagent.serialize['application/xml'] = function(obj){\n *       return 'generated xml here';\n *     };\n *\n */\n\n request.serialize = {\n   'application/x-www-form-urlencoded': serialize,\n   'application/json': JSON.stringify\n };\n\n /**\n  * Default parsers.\n  *\n  *     superagent.parse['application/xml'] = function(str){\n  *       return { object parsed from str };\n  *     };\n  *\n  */\n\nrequest.parse = {\n  'application/x-www-form-urlencoded': parseString,\n  'application/json': JSON.parse\n};\n\n/**\n * Parse the given header `str` into\n * an object containing the mapped fields.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction parseHeader(str) {\n  var lines = str.split(/\\r?\\n/);\n  var fields = {};\n  var index;\n  var line;\n  var field;\n  var val;\n\n  lines.pop(); // trailing CRLF\n\n  for (var i = 0, len = lines.length; i < len; ++i) {\n    line = lines[i];\n    index = line.indexOf(':');\n    field = line.slice(0, index).toLowerCase();\n    val = trim(line.slice(index + 1));\n    fields[field] = val;\n  }\n\n  return fields;\n}\n\n/**\n * Return the mime type for the given `str`.\n *\n * @param {String} str\n * @return {String}\n * @api private\n */\n\nfunction type(str){\n  return str.split(/ *; */).shift();\n};\n\n/**\n * Return header field parameters.\n *\n * @param {String} str\n * @return {Object}\n * @api private\n */\n\nfunction params(str){\n  return reduce(str.split(/ *; */), function(obj, str){\n    var parts = str.split(/ *= */)\n      , key = parts.shift()\n      , val = parts.shift();\n\n    if (key && val) obj[key] = val;\n    return obj;\n  }, {});\n};\n\n/**\n * Initialize a new `Response` with the given `xhr`.\n *\n *  - set flags (.ok, .error, etc)\n *  - parse header\n *\n * Examples:\n *\n *  Aliasing `superagent` as `request` is nice:\n *\n *      request = superagent;\n *\n *  We can use the promise-like API, or pass callbacks:\n *\n *      request.get('/').end(function(res){});\n *      request.get('/', function(res){});\n *\n *  Sending data can be chained:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' })\n *        .end(function(res){});\n *\n *  Or passed to `.send()`:\n *\n *      request\n *        .post('/user')\n *        .send({ name: 'tj' }, function(res){});\n *\n *  Or passed to `.post()`:\n *\n *      request\n *        .post('/user', { name: 'tj' })\n *        .end(function(res){});\n *\n * Or further reduced to a single call for simple cases:\n *\n *      request\n *        .post('/user', { name: 'tj' }, function(res){});\n *\n * @param {XMLHTTPRequest} xhr\n * @param {Object} options\n * @api private\n */\n\nfunction Response(req, options) {\n  options = options || {};\n  this.req = req;\n  this.xhr = this.req.xhr;\n  // responseText is accessible only if responseType is '' or 'text' and on older browsers\n  this.text = ((this.req.method !='HEAD' && (this.xhr.responseType === '' || this.xhr.responseType === 'text')) || typeof this.xhr.responseType === 'undefined')\n     ? this.xhr.responseText\n     : null;\n  this.statusText = this.req.xhr.statusText;\n  this.setStatusProperties(this.xhr.status);\n  this.header = this.headers = parseHeader(this.xhr.getAllResponseHeaders());\n  // getAllResponseHeaders sometimes falsely returns \"\" for CORS requests, but\n  // getResponseHeader still works. so we get content-type even if getting\n  // other headers fails.\n  this.header['content-type'] = this.xhr.getResponseHeader('content-type');\n  this.setHeaderProperties(this.header);\n  this.body = this.req.method != 'HEAD'\n    ? this.parseBody(this.text ? this.text : this.xhr.response)\n    : null;\n}\n\n/**\n * Get case-insensitive `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api public\n */\n\nResponse.prototype.get = function(field){\n  return this.header[field.toLowerCase()];\n};\n\n/**\n * Set header related properties:\n *\n *   - `.type` the content type without params\n *\n * A response of \"Content-Type: text/plain; charset=utf-8\"\n * will provide you with a `.type` of \"text/plain\".\n *\n * @param {Object} header\n * @api private\n */\n\nResponse.prototype.setHeaderProperties = function(header){\n  // content-type\n  var ct = this.header['content-type'] || '';\n  this.type = type(ct);\n\n  // params\n  var obj = params(ct);\n  for (var key in obj) this[key] = obj[key];\n};\n\n/**\n * Force given parser\n * \n * Sets the body parser no matter type.\n * \n * @param {Function}\n * @api public\n */\n\nResponse.prototype.parse = function(fn){\n  this.parser = fn;\n  return this;\n};\n\n/**\n * Parse the given body `str`.\n *\n * Used for auto-parsing of bodies. Parsers\n * are defined on the `superagent.parse` object.\n *\n * @param {String} str\n * @return {Mixed}\n * @api private\n */\n\nResponse.prototype.parseBody = function(str){\n  var parse = this.parser || request.parse[this.type];\n  return parse && str && (str.length || str instanceof Object)\n    ? parse(str)\n    : null;\n};\n\n/**\n * Set flags such as `.ok` based on `status`.\n *\n * For example a 2xx response will give you a `.ok` of __true__\n * whereas 5xx will be __false__ and `.error` will be __true__. The\n * `.clientError` and `.serverError` are also available to be more\n * specific, and `.statusType` is the class of error ranging from 1..5\n * sometimes useful for mapping respond colors etc.\n *\n * \"sugar\" properties are also defined for common cases. Currently providing:\n *\n *   - .noContent\n *   - .badRequest\n *   - .unauthorized\n *   - .notAcceptable\n *   - .notFound\n *\n * @param {Number} status\n * @api private\n */\n\nResponse.prototype.setStatusProperties = function(status){\n  // handle IE9 bug: http://stackoverflow.com/questions/10046972/msie-returns-status-code-of-1223-for-ajax-request\n  if (status === 1223) {\n    status = 204;\n  }\n\n  var type = status / 100 | 0;\n\n  // status / class\n  this.status = this.statusCode = status;\n  this.statusType = type;\n\n  // basics\n  this.info = 1 == type;\n  this.ok = 2 == type;\n  this.clientError = 4 == type;\n  this.serverError = 5 == type;\n  this.error = (4 == type || 5 == type)\n    ? this.toError()\n    : false;\n\n  // sugar\n  this.accepted = 202 == status;\n  this.noContent = 204 == status;\n  this.badRequest = 400 == status;\n  this.unauthorized = 401 == status;\n  this.notAcceptable = 406 == status;\n  this.notFound = 404 == status;\n  this.forbidden = 403 == status;\n};\n\n/**\n * Return an `Error` representative of this response.\n *\n * @return {Error}\n * @api public\n */\n\nResponse.prototype.toError = function(){\n  var req = this.req;\n  var method = req.method;\n  var url = req.url;\n\n  var msg = 'cannot ' + method + ' ' + url + ' (' + this.status + ')';\n  var err = new Error(msg);\n  err.status = this.status;\n  err.method = method;\n  err.url = url;\n\n  return err;\n};\n\n/**\n * Expose `Response`.\n */\n\nrequest.Response = Response;\n\n/**\n * Initialize a new `Request` with the given `method` and `url`.\n *\n * @param {String} method\n * @param {String} url\n * @api public\n */\n\nfunction Request(method, url) {\n  var self = this;\n  Emitter.call(this);\n  this._query = this._query || [];\n  this.method = method;\n  this.url = url;\n  this.header = {};\n  this._header = {};\n  this.on('end', function(){\n    var err = null;\n    var res = null;\n\n    try {\n      res = new Response(self);\n    } catch(e) {\n      err = new Error('Parser is unable to parse the response');\n      err.parse = true;\n      err.original = e;\n      return self.callback(err);\n    }\n\n    self.emit('response', res);\n\n    if (err) {\n      return self.callback(err, res);\n    }\n\n    if (res.status >= 200 && res.status < 300) {\n      return self.callback(err, res);\n    }\n\n    var new_err = new Error(res.statusText || 'Unsuccessful HTTP response');\n    new_err.original = err;\n    new_err.response = res;\n    new_err.status = res.status;\n\n    self.callback(new_err, res);\n  });\n}\n\n/**\n * Mixin `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Allow for extension\n */\n\nRequest.prototype.use = function(fn) {\n  fn(this);\n  return this;\n}\n\n/**\n * Set timeout to `ms`.\n *\n * @param {Number} ms\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.timeout = function(ms){\n  this._timeout = ms;\n  return this;\n};\n\n/**\n * Clear previous timeout.\n *\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.clearTimeout = function(){\n  this._timeout = 0;\n  clearTimeout(this._timer);\n  return this;\n};\n\n/**\n * Abort the request, and clear potential timeout.\n *\n * @return {Request}\n * @api public\n */\n\nRequest.prototype.abort = function(){\n  if (this.aborted) return;\n  this.aborted = true;\n  this.xhr.abort();\n  this.clearTimeout();\n  this.emit('abort');\n  return this;\n};\n\n/**\n * Set header `field` to `val`, or multiple fields with one object.\n *\n * Examples:\n *\n *      req.get('/')\n *        .set('Accept', 'application/json')\n *        .set('X-API-Key', 'foobar')\n *        .end(callback);\n *\n *      req.get('/')\n *        .set({ Accept: 'application/json', 'X-API-Key': 'foobar' })\n *        .end(callback);\n *\n * @param {String|Object} field\n * @param {String} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.set = function(field, val){\n  if (isObject(field)) {\n    for (var key in field) {\n      this.set(key, field[key]);\n    }\n    return this;\n  }\n  this._header[field.toLowerCase()] = val;\n  this.header[field] = val;\n  return this;\n};\n\n/**\n * Remove header `field`.\n *\n * Example:\n *\n *      req.get('/')\n *        .unset('User-Agent')\n *        .end(callback);\n *\n * @param {String} field\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.unset = function(field){\n  delete this._header[field.toLowerCase()];\n  delete this.header[field];\n  return this;\n};\n\n/**\n * Get case-insensitive header `field` value.\n *\n * @param {String} field\n * @return {String}\n * @api private\n */\n\nRequest.prototype.getHeader = function(field){\n  return this._header[field.toLowerCase()];\n};\n\n/**\n * Set Content-Type to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.xml = 'application/xml';\n *\n *      request.post('/')\n *        .type('xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n *      request.post('/')\n *        .type('application/xml')\n *        .send(xmlstring)\n *        .end(callback);\n *\n * @param {String} type\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.type = function(type){\n  this.set('Content-Type', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Accept to `type`, mapping values from `request.types`.\n *\n * Examples:\n *\n *      superagent.types.json = 'application/json';\n *\n *      request.get('/agent')\n *        .accept('json')\n *        .end(callback);\n *\n *      request.get('/agent')\n *        .accept('application/json')\n *        .end(callback);\n *\n * @param {String} accept\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.accept = function(type){\n  this.set('Accept', request.types[type] || type);\n  return this;\n};\n\n/**\n * Set Authorization field value with `user` and `pass`.\n *\n * @param {String} user\n * @param {String} pass\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.auth = function(user, pass){\n  var str = btoa(user + ':' + pass);\n  this.set('Authorization', 'Basic ' + str);\n  return this;\n};\n\n/**\n* Add query-string `val`.\n*\n* Examples:\n*\n*   request.get('/shoes')\n*     .query('size=10')\n*     .query({ color: 'blue' })\n*\n* @param {Object|String} val\n* @return {Request} for chaining\n* @api public\n*/\n\nRequest.prototype.query = function(val){\n  if ('string' != typeof val) val = serialize(val);\n  if (val) this._query.push(val);\n  return this;\n};\n\n/**\n * Write the field `name` and `val` for \"multipart/form-data\"\n * request bodies.\n *\n * ``` js\n * request.post('/upload')\n *   .field('foo', 'bar')\n *   .end(callback);\n * ```\n *\n * @param {String} name\n * @param {String|Blob|File} val\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.field = function(name, val){\n  if (!this._formData) this._formData = new root.FormData();\n  this._formData.append(name, val);\n  return this;\n};\n\n/**\n * Queue the given `file` as an attachment to the specified `field`,\n * with optional `filename`.\n *\n * ``` js\n * request.post('/upload')\n *   .attach(new Blob(['<a id=\"a\"><b id=\"b\">hey!</b></a>'], { type: \"text/html\"}))\n *   .end(callback);\n * ```\n *\n * @param {String} field\n * @param {Blob|File} file\n * @param {String} filename\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.attach = function(field, file, filename){\n  if (!this._formData) this._formData = new root.FormData();\n  this._formData.append(field, file, filename);\n  return this;\n};\n\n/**\n * Send `data`, defaulting the `.type()` to \"json\" when\n * an object is given.\n *\n * Examples:\n *\n *       // querystring\n *       request.get('/search')\n *         .end(callback)\n *\n *       // multiple data \"writes\"\n *       request.get('/search')\n *         .send({ search: 'query' })\n *         .send({ range: '1..5' })\n *         .send({ order: 'desc' })\n *         .end(callback)\n *\n *       // manual json\n *       request.post('/user')\n *         .type('json')\n *         .send('{\"name\":\"tj\"})\n *         .end(callback)\n *\n *       // auto json\n *       request.post('/user')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // manual x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send('name=tj')\n *         .end(callback)\n *\n *       // auto x-www-form-urlencoded\n *       request.post('/user')\n *         .type('form')\n *         .send({ name: 'tj' })\n *         .end(callback)\n *\n *       // defaults to x-www-form-urlencoded\n  *      request.post('/user')\n  *        .send('name=tobi')\n  *        .send('species=ferret')\n  *        .end(callback)\n *\n * @param {String|Object} data\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.send = function(data){\n  var obj = isObject(data);\n  var type = this.getHeader('Content-Type');\n\n  // merge\n  if (obj && isObject(this._data)) {\n    for (var key in data) {\n      this._data[key] = data[key];\n    }\n  } else if ('string' == typeof data) {\n    if (!type) this.type('form');\n    type = this.getHeader('Content-Type');\n    if ('application/x-www-form-urlencoded' == type) {\n      this._data = this._data\n        ? this._data + '&' + data\n        : data;\n    } else {\n      this._data = (this._data || '') + data;\n    }\n  } else {\n    this._data = data;\n  }\n\n  if (!obj || isHost(data)) return this;\n  if (!type) this.type('json');\n  return this;\n};\n\n/**\n * Invoke the callback with `err` and `res`\n * and handle arity check.\n *\n * @param {Error} err\n * @param {Response} res\n * @api private\n */\n\nRequest.prototype.callback = function(err, res){\n  var fn = this._callback;\n  this.clearTimeout();\n  fn(err, res);\n};\n\n/**\n * Invoke callback with x-domain error.\n *\n * @api private\n */\n\nRequest.prototype.crossDomainError = function(){\n  var err = new Error('Origin is not allowed by Access-Control-Allow-Origin');\n  err.crossDomain = true;\n  this.callback(err);\n};\n\n/**\n * Invoke callback with timeout error.\n *\n * @api private\n */\n\nRequest.prototype.timeoutError = function(){\n  var timeout = this._timeout;\n  var err = new Error('timeout of ' + timeout + 'ms exceeded');\n  err.timeout = timeout;\n  this.callback(err);\n};\n\n/**\n * Enable transmission of cookies with x-domain requests.\n *\n * Note that for this to work the origin must not be\n * using \"Access-Control-Allow-Origin\" with a wildcard,\n * and also must set \"Access-Control-Allow-Credentials\"\n * to \"true\".\n *\n * @api public\n */\n\nRequest.prototype.withCredentials = function(){\n  this._withCredentials = true;\n  return this;\n};\n\n/**\n * Initiate request, invoking callback `fn(res)`\n * with an instanceof `Response`.\n *\n * @param {Function} fn\n * @return {Request} for chaining\n * @api public\n */\n\nRequest.prototype.end = function(fn){\n  var self = this;\n  var xhr = this.xhr = request.getXHR();\n  var query = this._query.join('&');\n  var timeout = this._timeout;\n  var data = this._formData || this._data;\n\n  // store callback\n  this._callback = fn || noop;\n\n  // state change\n  xhr.onreadystatechange = function(){\n    if (4 != xhr.readyState) return;\n\n    // In IE9, reads to any property (e.g. status) off of an aborted XHR will\n    // result in the error \"Could not complete the operation due to error c00c023f\"\n    var status;\n    try { status = xhr.status } catch(e) { status = 0; }\n\n    if (0 == status) {\n      if (self.timedout) return self.timeoutError();\n      if (self.aborted) return;\n      return self.crossDomainError();\n    }\n    self.emit('end');\n  };\n\n  // progress\n  var handleProgress = function(e){\n    if (e.total > 0) {\n      e.percent = e.loaded / e.total * 100;\n    }\n    self.emit('progress', e);\n  };\n  if (this.hasListeners('progress')) {\n    xhr.onprogress = handleProgress;\n  }\n  try {\n    if (xhr.upload && this.hasListeners('progress')) {\n      xhr.upload.onprogress = handleProgress;\n    }\n  } catch(e) {\n    // Accessing xhr.upload fails in IE from a web worker, so just pretend it doesn't exist.\n    // Reported here:\n    // https://connect.microsoft.com/IE/feedback/details/837245/xmlhttprequest-upload-throws-invalid-argument-when-used-from-web-worker-context\n  }\n\n  // timeout\n  if (timeout && !this._timer) {\n    this._timer = setTimeout(function(){\n      self.timedout = true;\n      self.abort();\n    }, timeout);\n  }\n\n  // querystring\n  if (query) {\n    query = request.serializeObject(query);\n    this.url += ~this.url.indexOf('?')\n      ? '&' + query\n      : '?' + query;\n  }\n\n  // initiate request\n  xhr.open(this.method, this.url, true);\n\n  // CORS\n  if (this._withCredentials) xhr.withCredentials = true;\n\n  // body\n  if ('GET' != this.method && 'HEAD' != this.method && 'string' != typeof data && !isHost(data)) {\n    // serialize stuff\n    var contentType = this.getHeader('Content-Type');\n    var serialize = request.serialize[contentType ? contentType.split(';')[0] : ''];\n    if (serialize) data = serialize(data);\n  }\n\n  // set header fields\n  for (var field in this.header) {\n    if (null == this.header[field]) continue;\n    xhr.setRequestHeader(field, this.header[field]);\n  }\n\n  // send stuff\n  this.emit('request', this);\n  xhr.send(data);\n  return this;\n};\n\n/**\n * Faux promise support\n *\n * @param {Function} fulfill\n * @param {Function} reject\n * @return {Request}\n */\n\nRequest.prototype.then = function (fulfill, reject) {\n  return this.end(function(err, res) {\n    err ? reject(err) : fulfill(res);\n  });\n}\n\n/**\n * Expose `Request`.\n */\n\nrequest.Request = Request;\n\n/**\n * Issue a request:\n *\n * Examples:\n *\n *    request('GET', '/users').end(callback)\n *    request('/users').end(callback)\n *    request('/users', callback)\n *\n * @param {String} method\n * @param {String|Function} url or callback\n * @return {Request}\n * @api public\n */\n\nfunction request(method, url) {\n  // callback\n  if ('function' == typeof url) {\n    return new Request('GET', method).end(url);\n  }\n\n  // url first\n  if (1 == arguments.length) {\n    return new Request('GET', method);\n  }\n\n  return new Request(method, url);\n}\n\n/**\n * GET `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} data or fn\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.get = function(url, data, fn){\n  var req = request('GET', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.query(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * HEAD `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} data or fn\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.head = function(url, data, fn){\n  var req = request('HEAD', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * DELETE `url` with optional callback `fn(res)`.\n *\n * @param {String} url\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.del = function(url, fn){\n  var req = request('DELETE', url);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PATCH `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} data\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.patch = function(url, data, fn){\n  var req = request('PATCH', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * POST `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed} data\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.post = function(url, data, fn){\n  var req = request('POST', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * PUT `url` with optional `data` and callback `fn(res)`.\n *\n * @param {String} url\n * @param {Mixed|Function} data or fn\n * @param {Function} fn\n * @return {Request}\n * @api public\n */\n\nrequest.put = function(url, data, fn){\n  var req = request('PUT', url);\n  if ('function' == typeof data) fn = data, data = null;\n  if (data) req.send(data);\n  if (fn) req.end(fn);\n  return req;\n};\n\n/**\n * Expose `request`.\n */\n\nmodule.exports = request;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/superagent/lib/client.js\n ** module id = 18\n ** module chunks = 0 1\n **/","\n/**\n * Expose `Emitter`.\n */\n\nmodule.exports = Emitter;\n\n/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nfunction Emitter(obj) {\n  if (obj) return mixin(obj);\n};\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks[event] = this._callbacks[event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  var self = this;\n  this._callbacks = this._callbacks || {};\n\n  function on() {\n    self.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks[event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks[event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n  var args = [].slice.call(arguments, 1)\n    , callbacks = this._callbacks[event];\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks[event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/superagent/~/component-emitter/index.js\n ** module id = 19\n ** module chunks = 0 1\n **/","\n/**\n * Reduce `arr` with `fn`.\n *\n * @param {Array} arr\n * @param {Function} fn\n * @param {Mixed} initial\n *\n * TODO: combatible error handling?\n */\n\nmodule.exports = function(arr, fn, initial){  \n  var idx = 0;\n  var len = arr.length;\n  var curr = arguments.length == 3\n    ? initial\n    : arr[idx++];\n\n  while (idx < len) {\n    curr = fn.call(null, curr, arr[idx], ++idx, arr);\n  }\n  \n  return curr;\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/superagent/~/reduce-component/index.js\n ** module id = 20\n ** module chunks = 0 1\n **/","module.exports = {\n    post: /**\n * Make a X-Domain request to url and callback.\n *\n * @param url {String}\n * @param method {String} HTTP verb ('GET', 'POST', 'DELETE', etc.)\n * @param data {String} request body\n * @param callback {Function} to callback on completion\n * @param errback {Function} to callback on error\n */\n    function xdr(url, method, callback) {\n        var req;\n\n        if (XMLHttpRequest) {\n            req = new XMLHttpRequest();\n\n            if ('withCredentials' in req) {\n                req.open(method, url, true);\n                req.onerror = function(e){callback(e, null);};\n                req.onreadystatechange = function () {\n                    if (req.readyState === 4) {\n                        if (req.status >= 200 && req.status < 400) {\n                            callback(null,req.responseText);\n                        } else {\n                            callback(new Error('Response returned with non-OK status'));\n                        }\n                    }\n                };\n                return req;\n            }\n        } else if (XDomainRequest) {\n            req = new XDomainRequest();\n            req.open(method, url);\n            req.onerror = function(e){callback(e, null);};\n            req.onload = function () {\n                callback(null,req.responseText);\n            };\n            return req;\n        } else {\n            throw new Error('CORS not supported');\n        }\n    }\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/ajax.js\n ** module id = 21\n ** module chunks = 0 1\n **/"],"sourceRoot":""}